/*! foodraft-frontend - v1.0.0 - 2017-01-03
* Copyright (c) 2017 ; Licensed  */
!function(a,b){function c(b){function c(c,e){if("keydown"===c){var f=e;e=function(c){var d,e=a(".pac-item-selected").length>0;13!==c.which||e||(d=a.Event("keydown",{keyCode:40,which:40}),f.apply(b,[d])),f.apply(b,arguments)}}d.apply(b,arguments)}var d=b.addEventListener||b.attachEvent;b.addEventListener?b.addEventListener=c:b.attachEvent=c}var d=function(b){var c=new google.maps.LatLng(17.113804,78.129272),d=new google.maps.LatLng(17.632816,78.75824),e={componentRestrictions:{country:"IN"},bounds:new google.maps.LatLngBounds(c,d)};b.geocompleteOptions=a.extend(e,b.geocompleteOptions),this.options=b,this.currentGPSPosition={lat:"","long":"",name:""}};d.prototype={stringifyLatLng:function(a,b){return[a,b].join(",")},updateCookie:function(a,c,d){b.removeItem("lat_lng"),b.setItem("lat_lng",this.stringifyLatLng(a,c)),b.removeItem("location_name"),b.setItem("location_name",d)},onPlaceChange:function(){var b,c,d=this.autocomplete.getPlace();d.geometry&&(b=d.geometry.location.lat(),c=d.geometry.location.lng(),this.currentGPSPosition.lat=d.geometry.location.lat(),this.currentGPSPosition["long"]=d.geometry.location.lng(),this.currentGPSPosition.name=d.name,a.isFunction(this.options.onLocationSet)?this.options.onLocationSet(b,c,d.name):(this.openMapModal(),this.updateCookie(b,c,d.name)),this.location_being_changed=!1)},handleEnterKeyEvent:function(a){var b=String.fromCharCode(a.which);13===a.which?this.location_being_changed&&(a.preventDefault(),a.stopPropagation()):/[a-zA-Z0-9-_ ]/.test(b)&&(this.location_being_changed=!0)},reinitialize:function(){this.$el.val(""),google.maps.event.removeListener(this.place_change_listener_handle),google.maps.event.removeListener(this.keypress_listener_handle),this.init()},openMapModal:function(){a("#js-locate-me-modal").prop("class","modal fade").addClass("bottom direction"),a("#js-locate-me-modal").modal("show")},closeMapModal:function(){a("#js-locate-me-modal").prop("class","modal fade").removeClass("bottom direction"),a("#js-locate-me-modal").modal("hide")},getGeoName:function(b,c){return a.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+b+","+c+"&key=AIzaSyCBYbCquzqQLt_OYm_QIvPdX4wWmJicnhU"}).then(function(a){return a})},init:function(){var d=this.options.geocompleteOptions,e=a(this.options.el),f=e[0];c(f),this.$el=e,this.autocomplete=new google.maps.places.Autocomplete(f,d),this.place_change_listener_handle=google.maps.event.addListener(this.autocomplete,"place_changed",a.proxy(this.onPlaceChange,this)),this.keypress_listener_handle=google.maps.event.addDomListener(f,"keypress",a.proxy(this.handleEnterKeyEvent,this)),b.hasItem("location_name")&&e.val(decodeURIComponent(b.getItem("location_name")))}},window.LocationSelector=d}(jQuery,docCookies),function(){window.Util||(window.Util={}),Util.showCart=function(){$(".order-list").addClass("slide-in"),$(".mask").removeClass("hide"),$("body").addClass("noscroll")},Util.hideCart=function(){$(".order-list").removeClass("slide-in"),$(".mask").addClass("hide"),$("body").removeClass("noscroll")},Util.showOtdModal=function(){$(".js-otd-drilldown-modal").modal("show")},Util.hideOtdModal=function(){$(".js-otd-drilldown-modal").modal("hide")},Util.toggleCartVisibility=function(){$(".order-list").toggleClass("slide-in"),$(".mask").toggleClass("hide"),$("body").toggleClass("noscroll")},Util.objectifyFilter=function(a){var b={},c=a.split("&");return c.forEach(function(a){var c=a.split("="),d=c[0],e=c[1];b[d]?(b[d]instanceof Array||(b[d]=[b[d]]),b[d].push(e)):b[d]=e}),b},Util.hideFiltersOnSmallerScreens=function(){$(".js-filter-panel-wrapper").addClass("invisible-sm"),$("body").removeClass("noscroll")},Util.getThumbnailURL=function(a,b,c){null==c&&(c=!0);var d="http://dhijs6fmog8z.cloudfront.net/",e=c?"60x60":"150x150";return"milk"===a?d+a+"/"+b+"/"+e+".jpg":d+a+"/"+e+".jpg"}}(),page_for=function(a){return"partials/pages/"+a+".html"},template_for=function(a){return"partials/templates/"+a+".html"},function(){var a=docCookies.getItem;docCookies.getItem=function(){var b=a.apply(docCookies,arguments);return b?decodeURIComponent(b):b}}();var fr_dairy=angular.module("fr_dairy",["ngRoute","ngSanitize","ui.bootstrap-slider","infinite-scroll"]).config(["$routeProvider","$locationProvider",function(a,b){b.hashPrefix("!"),a.when("/",{redirectTo:"/products/milk"}).when("/products/:category",{templateUrl:page_for("generic_products"),controller:"GenericProductsCtrl",reloadOnSearch:!1}).when("/product_detail/:slug",{templateUrl:page_for("product_detail"),controller:"ProductDetailCtrl"}).when("/get_notified",{templateUrl:page_for("subscribe_mail"),controller:"SubscribeMailCtrl"}).when("/suggest_new_supplier",{templateUrl:page_for("suggest_new_supplier"),controller:"SuggestNewSupplierCtrl"})}]).run(function(){FastClick.attach(document.body)});!function(a){function b(b){b.preventDefault();var e=a(b.currentTarget).data("location"),f=c[e],g=d[e];if(docCookies.removeItem("lat_lng"),docCookies.setItem("lat_lng",f),docCookies.removeItem("location_name"),docCookies.setItem("location_name",g),"undefined"==typeof angular)window.location=window.location.protocol+"//"+window.location.host+"/dairy#!/products/milk";else{var h=angular.element(document.getElementById("js-generic-products")).scope();h.$apply(function(){h.updateCurrentLocationData()})}}var c={"banjara-hills":"17.413991493741705,78.43924341586921",miyapur:"17.50919634168556,78.35203468095096",mehdipatnam:"17.391927892921426,78.44009698650825","masab-tank":"17.40448611133649,78.44916004232789",ameerpet:"17.43746140000001,78.4483950883606",tolichowki:"17.399031200000017,78.41557989206535","sanath-nagar":"17.45264886026229,78.44326123862311","film-nagar":"17.414681316903557,78.41115355819704","ram-nagar":"17.41200117963138,78.50799628017876",balanagar:"17.465415269194228,78.44910542485354","red-hills":"17.395995200543695,78.46418259999996"},d={"banjara-hills":"Banjara Hills",miyapur:"Miyapur",mehdipatnam:"Mehdipatnam","masab-tank":"Masab Tank",ameerpet:"Ameerpet",tolichowki:"Tolichowki","sanath-nagar":"Sanath Nagar","film-nagar":"Film Nagar","ram-nagar":"Ram Nagar",balanagar:"Balanagar","red-hills":"Red Hills"};a("body").on("click",".js-popular-location",b)}($),fr_dairy.controller("HeaderCtrl",["$scope","$location","productService","sortingAndFilterService","$rootScope","$timeout","$http","myCartAndCheckoutService",function(a,b,c,d,e,f,g,h){a.$on("$locationChangeSuccess",function(c){a.headerLocation=b.path(),a.isProductsPage=a.headerLocation.indexOf("/products/")>-1}),Util.hideFiltersOnSmallerScreens(),$(".js-floating-nav").find("a").click(function(){$(".js-floating-nav").removeClass("is-visible"),$(".js-floating-nav-trigger").removeClass("is-open")}),a.myCartItemCount=0,a.$on("myCartUpdate",function(b,c){a.myCartItemCount=c.length,0==a.myCartItemCount&&(e.mobile_location_picker_visible=!1)}),e.mobile_location_picker_visible=!1;var i=["mobile","desktop"],j="";a.changeLocOnMbl=function(){j=i[0],a.myCartItemCount>0?($("#js-clear-cart-modal").prop("class","modal fade").addClass("bottom direction"),$("#js-clear-cart-modal").modal("show")):(e.mobile_location_picker_visible=!e.mobile_location_picker_visible,f(function(){angular.element("#js-loc-chng-mbl").val(""),angular.element("#js-loc-chng-mbl").focus()},200))},a.changeLocOnDesktop=function(){j=i[1],a.myCartItemCount>0?($("#js-clear-cart-modal").prop("class","modal fade").addClass("bottom direction"),$("#js-clear-cart-modal").modal("show")):f(function(){angular.element("#js-loc-chng-dktp").focus()},100)},a.gpsLocationChanged=function(){var a=b.path();a.indexOf("/products/")>-1?e.$broadcast("GPSLocationChanged"):(c.locationChanged(),d.getUpdatedSupplierList(),f(function(){b.path("/products/milk")},1e3)),e.mobile_location_picker_visible=!1},a.locationSelectedOnMobile=function(){e.mobile_location_picker_visible=!1},a.clearCartFromModal=function(){var b=0,c=0;g.get("api/v1/cart").success(function(d,e){if(b=d.objects.length,d.objects.length>0)for(var f=0;f<d.objects.length;f++)g["delete"]("api/v1/line_items/"+d.objects[f].id).success(function(d,e){c+=1,b==c&&($("#js-clear-cart-modal").prop("class","modal fade").removeClass("bottom direction"),$("#js-clear-cart-modal").modal("hide"),a.myCartItemCount=0,j==i[0]&&a.changeLocOnMbl(),j==i[1]&&a.changeLocOnDesktop(),h.getAllCartItems())}).error(function(a,b){});else cartCleaned(),j==i[0]&&a.changeLocOnMbl(),j==i[1]&&a.changeLocOnDesktop()}).error(function(a,b){})}}]),fr_dairy.controller("OTDModalCtrl",["$scope","myCartAndCheckoutService","$http","$log","productService","$timeout","$window",function(a,b,c,d,e,f,g){var h=function(){a.OTDTriggerProduct={supplier:{name:"",min_order:""}},a.OTDModalCartItems=[],a.OTDALLProducts=[],a.OTDCartTotal=0,a.disableAddToCart=!0,a.distributor_id=""},i=function(){for(var b=0,c=0;c<a.OTDModalCartItems.length;c++)b+=a.OTDModalCartItems[c].discounted_price*a.OTDModalCartItems[c].quantity;a.OTDCartTotal=b,a.disableAddToCart=a.OTDCartTotal<a.OTDTriggerProduct.supplier.min_order,a.disableAddToCart?($("#js-mobileOTDSmallSummary").removeClass("visible-sm visible-xs").addClass("hidden-sm hidden-xs"),$("#js-mobileOTDFullSummary").removeClass("visible-sm visible-xs").addClass("hidden-xs hidden-sm")):($("#js-mobileOTDSmallSummary").removeClass("hidden-xs hidden-sm"),$("#js-mobileOTDSmallSummary").addClass("visible-sm visible-xs"))},j=function(b){for(var c=0;c<b.length;c++)b[c].thumbnailImage=e.getThumbnailURL(b[c].category.name,b[c].variant.name),b[c].categoryName=e.getParsedString(b[c].category.name),b[c].variantName=e.getParsedString(b[c].variant.name),b[c].quantityUnit="milk"==b[c].category.name?"Ltr":"Kg","milk"==b[c].category.name&&"flavored"==b[c].variant.name&&(a.quantityUnit="Pc"),a.OTDALLProducts.push(b[c])};a.$on("OTDModalUpdate",function(b,e,g,k,l){var m=function(){a.OTDModalCartItems=[],e.quantity=k,e.quantityUnit=l,a.OTDTriggerProduct=e,a.distributor_id=g,a.OTDModalCartItems.push(e),i()},n=function(){var a=$(".js-otd-drilldown-modal .modal-body"),b=a.find(".js-otd-tab-content"),c=a.find(".js-otd-tabs").outerHeight(),d=parseInt(b.css("padding-top"))+parseInt(b.css("padding-bottom"));b.height(a.height()-c-d)};a.OTDTriggerProduct.supplier.id!=e.supplier.id?(h(),a.showLocalContentLoader=!0,m(),f(function(){c.get("api/v1/products/?supplier_id="+a.OTDTriggerProduct.supplier.id).success(function(b,c){j(b.dairy_products),a.showLocalContentLoader=!1,$(window).width()<=992&&f(n)}).error(function(b,c){d.error("Server failure while retrieving Products Data by supplier"),a.showLocalContentLoader=!1,h()})},800)):m()}),h(),a.addItemToOTDCart=function(b,c){for(var d=-1,e=0;e<a.OTDModalCartItems.length;e++)a.OTDModalCartItems[e].id==b.id&&(d=e);-1==d?(b.quantity=c,a.OTDModalCartItems.push(b)):a.OTDModalCartItems[d].quantity+=c,i()},a.removeItemFromOTDCart=function(b){a.OTDModalCartItems.splice(b,1),i()},a.addOTDItemsToCart=function(){for(var c={line_item:{subscription_period:0,distributor_id:a.distributor_id,sub_line_items:[]}},d=0;d<a.OTDModalCartItems.length;d++){var e={};e.product_id=a.OTDModalCartItems[d].id,e.quantity=a.OTDModalCartItems[d].quantity,e.name=a.OTDModalCartItems[d].supplier.name+" "+a.OTDModalCartItems[d].variantName+" "+a.OTDModalCartItems[d].categoryName,c.line_item.sub_line_items.push(e)}b.addOTDItemsToMyCart(c),Util.hideOtdModal()},a.closeOTDModal=function(){g.ga("send","event","Button","Click","OTD Modal Closed without adding items to cart"),g.ga("send","event","Info","OTD Modal Closed without adding items to cart","For Supplier: "+a.OTDTriggerProduct.supplier.name)},a.showFullSummaryOnMobile=function(a){a?$("#js-mobileOTDFullSummary").addClass("visible-sm visible-xs").removeClass("hidden-sm hidden-xs"):$("#js-mobileOTDFullSummary").addClass("hidden-xs hidden-sm").removeClass("visible-xs visible-sm")}}]),fr_dairy.controller("MyCartAndCheckoutViewCtrl",["$scope","myCartAndCheckoutService","$location","$timeout","$window",function(a,b,c,d,e){var f=function(b){for(var c=0,d=0;d<b.length;d++)for(var e=0;e<b[d].sub_line_items.length;e++)c+=b[d].sub_line_items[e].total_price;a.myCartTotal=c};a.$on("myCartUpdate",function(b,c){a.myCartItems=c,f(c)}),a.removeFromMyCart=function(a){b.removeFromMyCart(a)},a.letsCheckOut=function(){d(function(){b.checkOutNow()},700)},a.continueShopping=function(){c.$$search={},d(function(){c.url("/products/milk?source=frApp&category=milk&order=price%20ASC&page=1&price__min=35&price__max=70")},350)}}]),fr_dairy.controller("GenericProductsCtrl",["$scope","$window","$location","$routeParams","myCartAndCheckoutService","sortingAndFilterService","$http","$timeout","productService","$rootScope","promotionalProductService",function(a,b,c,d,e,f,g,h,i,j,k){a.updateCurrentLocationData=function(){i.locationChanged(),h(function(){a.getProductsNow(),f.getUpdatedSupplierList()},200),h(function(){angular.element("#js-loc-chng-dktp").val(a.currentLocation),j.noSuppliersAtCurrentLocation||$("html, body").animate({scrollTop:$("#js-products-panel-start").offset().top-150},500)},700)},a.$on("GPSLocationChanged",function(b){a.updateCurrentLocationData()}),a.goToLandingPage=function(){var a=window.location;a.href=a.protocol+"//"+a.host};var l=function(){b.ga("send","pageview",{page:c.path(),title:d.category+" products page"})};a.$on("$viewContentLoaded",function(a){l()}),a.firstLoad=1,a.noMoreData=!1,a.category=d.category,a.categoryName=i.getParsedString(d.category),a.currentLocation=i.getCurrentLocation(),j.showFilterSectionForMobile=!0,j.indexTitle=i.getParsedString(d.category),j.showPopularLocationAtFooter=!0,a.$on("genericProductsUpdate",function(b,c){a.GenericProducts=c,a.noMoreData=!1,a.currentLocation=i.getCurrentLocation(),$("#js-current-location-text").tooltip("destroy"),$("#js-current-location-text").tooltip({placement:"top",title:a.currentLocation})}),$("#js-current-location-text").tooltip({placement:"top",title:a.currentLocation}),a.GenericProducts=i.getProductDataByCategory(d.category),a.$on("filtersChangedUpdate",function(b){a.filterObj=f.getFilterObjDataByCategory(d.category)}),a.sortParam=f.getSortParamDataByCategory(d.category),a.filterObj=f.getFilterObjDataByCategory(d.category),a.filterParamObject=f.createFilterParamObj(a.filterObj,a.sortParam,1);var m=function(){var b={};b.params=c.search(),delete b.params.source,i.getFilteredProducts(b,!1),h(function(){a.sortParam=b.params.order,a.filterObj=f.createFilterObjByParam(b.params,b.params)},1500)};a.$on("$routeUpdate",function(){c.search().hasOwnProperty("source")&&m()});var n=function(){h(function(){0!=a.GenericProducts.length&&(a.firstLoad=0)},3e3),c.search().hasOwnProperty("source")?m():0==a.GenericProducts.length&&a.getProductsNow()};a.getProductsNow=function(){a.filterParamObject=f.createFilterParamObj(a.filterObj,a.sortParam,a.isSubscription,1),i.getFilteredProducts(a.filterParamObject,!1)},a.loadMore=function(){j.moreDataLoading=!0,0!=a.GenericProducts.length&&h(function(){a.pageNum=a.GenericProducts.meta.current_page+1,a.pageNum<=a.GenericProducts.meta.total_pages?(a.filterParamObject=f.createFilterParamObj(a.filterObj,a.sortParam,a.pageNum),i.getFilteredProducts(a.filterParamObject,!0)):(j.moreDataLoading=!1,a.noMoreData=!0)},1800)},a.$on("promotionalProductsUpdate",function(b,c){a.promotionalProducts=c}),a.promotionalProducts=k.getPromotionalProducts(),n()}]),fr_dairy.controller("ProductDetailCtrl",["$scope","$window","$http","$routeParams","$location","myCartAndCheckoutService","$timeout","$rootScope","$log","$anchorScroll","productService",function(a,b,c,d,e,f,g,h,i,j,k){a.newReview={ratingBoxValue:0},a.publishReviewButtonText="Submit";var l=function(){a.productName=k.getParsedString(a.product.variant.name)+" "+k.getParsedString(a.product.category.name),h.indexTitle=a.product.supplier.name+" "+a.productName},m=function(){h.showContentLoader=!0,c.get("api/v1/products/"+d.slug).success(function(c,f){a.product=c,h.$broadcast("productDetailDataUpdate"),l(),b.ga("send","pageview",{page:e.path(),title:"Product Details page"}),b.ga("send","event","Info","Product Details Page Opened","Product: "+d.slug+", Product ID - "+a.product.id),h.showContentLoader=!1,a.showProductPanel=!0}).error(function(a,b){i.error("Server failure while retrieving Product Detail Data")})},n=function(){c.get("api/v1/nutrition_parameters/?product_slug="+d.slug).success(function(b,c){a.nutritionDetails=b}).error(function(a,b){i.error("Server failure while retrieving Nutritional Detail Data")})},o=function(){if(void 0!=a.allReviewsData.dairy_product_reviews)for(var b=0;b<a.allReviewsData.dairy_product_reviews.length;b++){var c=new Date(a.allReviewsData.dairy_product_reviews[b].created_at);a.allReviewsData.dairy_product_reviews[b].daysAgo=moment(c).fromNow()}},p=function(b){c.get("api/v1/product_reviews?product_slug="+d.slug+"&page="+b).success(function(b,c){a.allReviewsData=b,o()}).error(function(a,b){i.error("Server failure while retrieving Reviews' Data")})};m(),n(),p(1),a.clickFloatingBuy=function(){g(function(){$(".buy-btn-mbl").length?$(".buy-btn-mbl").click():$("html, body").animate({scrollTop:$("#mbl_pnl_"+a.product.category.name+"_"+a.product.id).offset().top-($(window).height()/2-100)},500)},100)},a.openReviewPanel=function(){a.showAddReviewBox=!0,a.showRatingError=!1,g(function(){$("#reviewers-name").focus()},100)},a.publishReview=function(){if(0==a.newReview.ratingBoxValue&&(a.showRatingError=!0),void 0!=a.newReview.name&&void 0!=a.newReview.description&&0!=a.newReview.ratingBoxValue&&void 0!=a.newReview.ratingBoxValue){a.publishReviewButtonText="Submitting...";var b=jQuery.extend(!0,{},a.newReview);b.rating=b.ratingBoxValue/2+.5,b.product_id=a.product.id,delete b.ratingBoxValue,c.post("api/v1/product_reviews",b).success(function(b,c){a.showAddReviewBox=!1,a.newReview={ratingBoxValue:0},a.publishReviewButtonText="Publish Review",m(),p(1),a.showRatingError=!1}).error(function(b,c){i.error("Server failure while retrieving a Products' Data"),a.showAddReviewBox=!1,a.publishReviewButtonText="Publish Review",a.showRatingError=!1})}}}]),fr_dairy.controller("SubscribeMailCtrl",["$scope","productService","$http","$log","$rootScope","$window","$location","$timeout","sortingAndFilterService",function(a,b,c,d,e,f,g,h,i){e.showPopularLocationAtFooter=!1,a.userEmail="",a.userPhone="",g.$$search={},g.search("key",null),a.subscriptionSuccess=!1,a.currentLocation=docCookies.getItem("location_name"),a.buttonText="Subscribe",a.showLoader=!1;var j=i.getPopularBrandsStatus();j||(a.showLoader=!0),a.$on("popularBrandsUpdate",function(b){a.showLoader=!1}),a.clickSubscribe=function(){if(void 0!=a.userEmail&&""!=a.userEmail&&void 0!=a.userPhone&&""!=a.userPhone){var b=docCookies.getItem("lat_lng").split(","),e={};e.subscription_type="new_supplier",e.locality=a.currentLocation,e.email=a.userEmail,e.phone=a.userPhone,e.latitude=b[0],e.longitude=b[1],a.buttonText="Subscribing...",c.post("subscriptions/subscribe",e).success(function(b,c){a.subscriptionSuccess=!0,a.buttonText="Subscribe",f.ga("send","event","Info","Email Subscribed for a Location","Location: "+e.locality)}).error(function(b,c){a.buttonText="Subscribe",d.error("Server failure while submitting an email for subscription")})}}}]),fr_dairy.controller("SuggestNewSupplierCtrl",["$scope","productService","$http","$log","$rootScope","$window","$location","$timeout","sortingAndFilterService",function(a,b,c,d,e,f,g,h,i){e.showPopularLocationAtFooter=!1,g.$$search={},g.search("key",null),a.submissionSuccess=!1,a.currentLocation=docCookies.getItem("location_name"),a.supplierName="",a.supplierNumber="",a.userEmail="",a.buttonText="Submit",a.clickSubmit=function(){if(void 0!=a.supplierName&&""!=a.supplierName&&""!=a.supplierNumber&&void 0!=a.supplierNumber&&void 0!=a.userEmail&&""!=a.userEmail){var b={};b.email=a.userEmail,b.supplier_name=a.supplierName,b.supplier_phone_number=a.supplierNumber,b.locality=a.currentLocation,a.buttonText="Submitting...",c.post("supplier_suggestions",b).success(function(b,c){a.submissionSuccess=!0,a.buttonText="Submit",f.ga("send","event","Info","New supplier suggested for a Location","Location: "+a.currentLocation)}).error(function(b,c){a.buttonText="Submit",a.submissionSuccess=!1,d.error("Server failure while submitting a suggestion of a supplier")})}}}]),fr_dairy.directive("productPanel",["$location","productService","$window","$rootScope","myCartAndCheckoutService","$timeout",function(a,b,c,d,e,f){return{restrict:"EA",templateUrl:template_for("productPanel"),replace:!0,transclude:!0,scope:{product:"=",isSubscription:"=",directiveFor:"@",addToModalCart:"&"},controller:["$scope",function(a){a.showDistributorsDD=!1,a.selectedDistributor={},void 0!=a.product.distributors&&(a.selectedDistributor=a.product.distributors[0]),a.quantityUnit="milk"==a.product.category.name?"Ltr":"Kg","milk"==a.product.category.name&&"flavored"==a.product.variant.name&&(a.quantityUnit="Pc"),a.quantity=.5,"milk"==a.product.category.name&&"flavored"==a.product.variant.name&&(a.quantity=1),a.quantity_step="Pc"==a.quantityUnit?1:.5,a.showMobilePanel=!1,a.subscription_period=0,"milk"==a.product.category.name&&(a.subscription_period=7),a.product.categoryName=b.getParsedString(a.product.category.name),a.product.variantName=b.getParsedString(a.product.variant.name),a.product.thumbnailImage=b.getThumbnailURL(a.product.category.name,a.product.variant.name),a.productName=a.product.supplier.name+" "+a.product.variantName+" "+a.product.categoryName,"sweets"==a.product.category.name&&(a.productName=a.product.variantName+" by "+a.product.supplier.name),void 0!=a.product.distributors&&f(function(){$("#dktp_dist_info_"+a.product.id).tooltip({placement:"top",title:a.selectedDistributor.name})},500)}],link:function(a,b,c){a.showDistributors=function(){a.showDistributorsDD=!a.showDistributorsDD},a.selectDistributor=function(b){a.selectedDistributor=a.product.distributors[b],$("#dktp_dist_info_"+a.product.id).tooltip("destroy"),$("#dktp_dist_info_"+a.product.id).tooltip({placement:"top",title:a.selectedDistributor.name}),a.showDistributors(),$("#dktp_dist_info_"+a.product.id).mouseover()},a.validateQuantity=function(){"Pc"==a.quantityUnit?a.quantity=a.quantity<=0?1:a.quantity:a.quantity=a.quantity<=0?.5:a.quantity},a.decreaseQuantity=function(){a.quantity-=a.quantity_step,a.validateQuantity()},a.increaseQuantity=function(){a.quantity+=a.quantity_step,a.validateQuantity()},a.clickBuy=function(){d.tempScrollPos=$(window).scrollTop(),a.showMobilePanel=!0,f(function(){$("html, body").animate({scrollTop:$("#mbl_pnl_"+a.product.category.name+"_"+a.product.id).offset().top-($(window).height()/2-100)},500)},50)},a.clickCancel=function(){a.showMobilePanel=!1,$("html, body").animate({scrollTop:d.tempScrollPos},500)},a.addToCart=function(){a.showMobilePanel=!1,"0"==a.subscription_period&&a.quantity*a.product.discounted_price<a.product.supplier.min_order?(d.$broadcast("OTDModalUpdate",a.product,a.selectedDistributor.id,a.quantity,a.quantityUnit),Util.showOtdModal()):e.addToMyCart(a.product,a.selectedDistributor.id,a.quantity,a.quantityUnit,a.subscription_period,a.productName)},a.addToOTDModal=function(){a.addToModalCart({product:a.product,quantity:a.quantity})}}}}]),fr_dairy.directive("sortingBox",["$timeout","productService","sortingAndFilterService",function(a,b,c){return{restrict:"EA",templateUrl:template_for("sortingBox"),replace:!0,transclude:!0,scope:{sortParam:"=",getSortedDataAtController:"&"},controller:["$scope",function(b){b.getSortedData=function(){a(function(){b.getSortedDataAtController()},200)},b.sortListItems=c.getSortingList()}]}}]),fr_dairy.directive("colorRatingPanelEditable",function(){return{restrict:"EA",templateUrl:template_for("colorRatingPanelEditable"),replace:!0,scope:{s:"="}}}),fr_dairy.directive("colorRatingPanelViewable",["$timeout",function(a){return{restrict:"EA",templateUrl:template_for("colorRatingPanelViewable"),replace:!0,scope:{directiveFor:"@",rating:"=",productId:"=",type:"@",indexAtPage:"@"},controller:["$scope",function(b){var c=function(){var a="Outstanding",c=5==Math.floor(b.rating)?9:Math.floor(Math.floor(2*b.rating)+.1),d=!0;switch(c){case 9:a="Outstanding";break;case 8:a="Superior";break;case 7:a="Very Good";break;case 6:a="Good";break;case 5:a="Average";break;case 4:a="Poor";break;case 3:a="Poor";break;case 2:a="Poor";break;case 0:a="Not yet rated";break;default:a="Not yet rated"}if(d){var e="#js-rating-box_"+b.productId+"_"+b.directiveFor+"_"+b.indexAtPage;$(e).tooltip({placement:"top",title:a})}},d=function(){a(function(){b.bgClass=5==Math.floor(b.rating)?"rating-bg-9":"rating-bg-"+Math.floor(Math.floor(2*b.rating)+.1),b.bgClass+=b.type?" "+b.type:""},500),a(function(){c()},1500)};d(),b.$on("productDetailDataUpdate",function(a){d()})}]}}]),fr_dairy.directive("validateQuantity",["$timeout",function(a){return{require:"ngModel",link:function(b,c,d,e){b.minQuantity=.5;var f=null,g=function(c,d){c!=d&&(f&&a.cancel(f),f=a(b.validateScopeQuantity,2e3))};b.validateScopeQuantity=function(){(null==b.quantity||void 0==b.quantity||b.quantity<b.minQuantity)&&(b.quantity=b.minQuantity)},b.$watch("quantity",g)}}}]),fr_dairy.directive("filterPanel",["sortingAndFilterService","$timeout","$rootScope","productService",function(a,b,c,d){return{restrict:"EA",templateUrl:template_for("filterPanel"),replace:!0,transclude:!0,scope:{directiveFor:"@",filterObj:"=",firstLoad:"=",categoryName:"=",getFilteredDataAtController:"&"},controller:["$scope",function(a){if(c.isMobilePriceFilterChanged=!1,a.quantityUnit="Milk"==a.categoryName?"Ltr":"Kg",a.mobilePriceFilterChanged=function(){c.isMobilePriceFilterChanged=!0},a.clickFilter=function(){"webApp"!=a.directiveFor||c.isMobilePriceFilterChanged||b(function(){a.getFilteredDataAtController()},200)},a.clickMobileFilter=function(){b(function(){a.getFilteredDataAtController()},200)},"mobile"===a.directiveFor){a.activateFilter=function(b){a.selected_filter_category=b};for(var d in a.filterObj.selectFilters)if(a.filterObj.selectFilters.hasOwnProperty(d)){if(a.selected_filter_category)break;a.selected_filter_category=d}}a.sliderOptions={min:0,step:5,max:100},a.slider_price_range={arr:[a.filterObj.priceFilter.minPrice,a.filterObj.priceFilter.maxPrice]}}],link:function(a,c,d){a.directiveInputMinPrice=a.filterObj.priceFilter.minPrice,a.directiveInputMaxPrice=a.filterObj.priceFilter.maxPrice,a.checkMinInputValues=function(){if(parseFloat(a.directiveInputMinPrice)>=parseFloat(a.directiveInputMaxPrice)||a.directiveInputMinPrice>=parseFloat(a.filterObj.priceFilter.ceil))a.directiveInputMinPrice=parseFloat(a.filterObj.priceFilter.maxPrice)-1,a.filterObj.priceFilter.minPrice=parseFloat(a.filterObj.priceFilter.maxPrice)-1;else if(a.directiveInputMinPrice<parseFloat(a.filterObj.priceFilter.floor)||"NaN"==a.directiveInputMinPrice)a.directiveInputMinPrice=parseFloat(a.filterObj.priceFilter.floor)+1,a.filterObj.priceFilter.minPrice=parseFloat(a.filterObj.priceFilter.floor)+1;else{var b=a.directiveInputMinPrice;a.filterObj.priceFilter.minPrice=b}},a.checkMaxInputValues=function(){if(parseFloat(a.directiveInputMaxPrice)<=parseFloat(a.directiveInputMinPrice)||a.directiveInputMaxPrice<=parseFloat(a.filterObj.priceFilter.floor))a.directiveInputMaxPrice=parseFloat(a.filterObj.priceFilter.minPrice)+1,a.filterObj.priceFilter.maxPrice=parseFloat(a.filterObj.priceFilter.minPrice)+1;else if(a.directiveInputMaxPrice>parseFloat(a.filterObj.priceFilter.ceil)||"NaN"==a.directiveInputMaxPrice)a.directiveInputMaxPrice=parseFloat(a.filterObj.priceFilter.ceil)-1,a.filterObj.priceFilter.maxPrice=parseFloat(a.filterObj.priceFilter.ceil)-1;else{var b=a.directiveInputMaxPrice;a.filterObj.priceFilter.maxPrice=b}};var e=null,f=null,g=function(c,d){c!=d&&(e&&b.cancel(e),e=b(a.checkMinInputValues,750))},h=function(c,d){c!=d&&(f&&b.cancel(f),f=b(a.checkMaxInputValues,750))};a.allotMinValues=function(b,c){a.directiveInputMinPrice=b},a.allotMaxValues=function(b,c){a.directiveInputMaxPrice=b},a.$watch("slider_price_range.arr[0]",a.allotMinValues),a.$watch("slider_price_range.arr[1]",a.allotMaxValues),a.$watch("directiveInputMinPrice",g),a.$watch("directiveInputMaxPrice",h),a.$watch("filterObj.priceFilter.minPrice",function(b){return b?void(1!=a.firstLoad&&setTimeout(function(){b===a.filterObj.priceFilter.minPrice&&a.clickFilter()},750)):0}),a.$watch("filterObj.priceFilter.maxPrice",function(b){return b?void(1!=a.firstLoad&&setTimeout(function(){b===a.filterObj.priceFilter.maxPrice&&1!=a.firstLoad&&a.clickFilter()},750)):0})}}}]),fr_dairy.directive("orderDetailsForm",["myCartAndCheckoutService","productService","$rootScope","$timeout","$window",function(a,b,c,d,e){return{restrict:"EA",replace:!0,templateUrl:template_for("orderDetailsForm"),transclude:!0,scope:{product:"=",disableBuyButton:"=",showOrderDetailsForm:"="},controller:["$scope",function(a){a.showRegularDeliveryForm="milk"==a.product.category.name?!0:!1,a.quantity=.5,"milk"==a.product.category.name&&"flavored"==a.product.variant.name&&(a.quantity=1),a.quantityUnit="milk"==a.product.category.name?"Ltr":"Kg","milk"==a.product.category.name&&"flavored"==a.product.variant.name&&(a.quantityUnit="Pc"),a.subscriptionPlan=7,a.disableConfirm=!1,a.thumbnailImage=b.getThumbnailURL(a.product.category.name,a.product.variant.name),a.categoryName=b.getParsedString(a.product.category.name),a.variantName=b.getParsedString(a.product.variant.name),a.productName=a.product.supplier.name+" "+a.variantName+" "+a.categoryName}],link:function(b,f,g){Date.prototype.addHours=function(a){return this.setHours(this.getHours()+a),this};var h,i=(new Date).getHours(),j=function(){switch(b.product.categoryName=b.categoryName,b.product.variantName=b.variantName,b.product.thumbnailImage=b.thumbnailImage,b.timeSlot){case"morning-slot":b.timeSlot_id=b.morningObj.id;break;case"evening-slot":b.timeSlot_id=b.eveningObj.id}},k=function(){h=i>=16?(new Date).addHours(24-i):new Date,d(function(){$(".js-datepicker").datepicker({autoclose:!0,startDate:h}).datepicker("setDate",h),$(".js-subscription-quantity").tooltip({placement:"top",title:"Select Quantity of "+b.categoryName+" in "+b.quantityUnit+" that needs to be delivered "}),$(".js-subscription-datepicker").tooltip({placement:"top",title:"Select the date"})},100),b.disableBuyButton=1},l=function(a){b.disableMorningDelivery=1!=a,b.timeSlot=1==a&&b.morningObj.available?"morning-slot":"evening-slot"},m=function(){b.morningObj={available:!1},b.eveningObj={available:!1};for(var a=0;a<b.product.supplier.time_slots.length;a++)switch(b.product.supplier.time_slots[a].slug){case"morning-slot":b.morningObj=b.product.supplier.time_slots[a],b.morningObj.available=!0;break;case"evening-slot":b.eveningObj=b.product.supplier.time_slots[a],b.eveningObj.available=!0}b.timeSlot=b.disableMorningDelivery&&b.morningObj.available?"morning-slot":"evening-slot"};k(),l(0),m(),b.changeDeliveryDate=function(a){var b=new Date;b=b.toDateString(),l(a.substr(0,2)!=b.substr(8,2)?1:a.substr(3,3)==b.substr(4,3)&&a.substr(7,4)==b.substr(11,4)?0:1)},b.assignOrderType=function(){b.showRegularDeliveryForm="true"==b.radioTrueOrFalse?!0:!1,e.ga("send","event","Conversion click events","Order type radio selected","For Product: "+b.productName),$("html, body").animate({scrollTop:$("#orderDetails_"+b.product.category.name+"_"+b.product.id).offset().top-($(window).height()/2-200)},500)},b.closeFormStepOne=function(){$("html, body").animate({scrollTop:c.tempScrollPos},500),b.showOrderDetailsForm=!1,b.disableBuyButton=0},b.closeForm=function(){d(function(){b.showOrderDetailsForm=!1,b.disableBuyButton=0},550),$("html, body").animate({scrollTop:c.tempScrollPos},500)},b.addToCart=function(){j();var d=1==b.showRegularDeliveryForm?b.startDate:b.deliveryDate;if(b.showRegularDeliveryForm)a.addToMyCart(b.product,b.product.distributors[0].id,b.quantity,b.quantityUnit,d,b.showRegularDeliveryForm,b.subscriptionPlan,b.productName,b.timeSlot_id);else{var e={};switch(b.timeSlot){case"morning-slot":e=b.morningObj;break;case"evening-slot":e=b.eveningObj}b.quantity*b.product.discounted_price<b.product.supplier.min_order?(c.$broadcast("OTDModalUpdate",b.product,b.quantity,b.quantityUnit,d,e),
Util.showOtdModal()):a.addToMyCart(b.product,b.product.distributors[0].id,b.quantity,b.quantityUnit,d,b.showRegularDeliveryForm,b.subscriptionPlan,b.productName,b.timeSlot_id)}}}}}]),fr_dairy.directive("noResultsFound",function(){return{restrict:"EA",templateUrl:template_for("noResultsFound"),scope:!1}}),fr_dairy.directive("promotionalProductPanel",["productService",function(a){return{restrict:"EA",templateUrl:template_for("promotionalProductPanel"),replace:!0,transclude:!0,scope:{supplierProduct:"="},controller:["$scope",function(b){b.quantityUnit="milk"==b.supplierProduct.category.name?"Ltr":"Kg",b.thumbnailImage=a.getThumbnailURL(b.supplierProduct.category.name,b.supplierProduct.variant.name),b.categoryName=a.getParsedString(b.supplierProduct.category.name),b.variantName=a.getParsedString(b.supplierProduct.variant.name)}]}}]),fr_dairy.filter("customLimitTo",[function(){return function(a,b){var c=Object.keys(a);if(c.length<1)return[];var d=new Object,e=0;return angular.forEach(c,function(c,f){return e>=b?!1:(d[c]=a[c],void e++)}),d}}]),fr_dairy.service("sortingAndFilterService",["$timeout","$http","$window","productService","$rootScope","promotionalProductService","$location",function(a,b,c,d,e,f,g){var h="price ASC",i="price ASC",j="price ASC",k="price ASC",l="price ASC",m="price ASC",n=!1,o=[{name:"Price -- High to Low",value:"price DESC"},{name:"Price -- Low to High",value:"price ASC"}],p={filterValues:[{id:1,name:"Heritage",select:!1},{id:2,name:"Dodla",select:!1},{id:3,name:"Milky Plus",select:!1},{id:4,name:"Patel Dairy",select:!1},{id:5,name:"Baba Dairy",select:!1}]},q=function(a){for(var b=0;b<y.length;b++)angular.copy(a,y[b].selectFilters.brands)},r=function(){e.noSuppliersAtCurrentLocation=!1,b.get("api/v1/suppliers/?type=popular").success(function(a,b){if(0==a.dairy_suppliers.length){var h=d.getCurrentLocation();c.ga("send","event","Info","No Suppliers available at this location","Unfilled Location: "+h),q(p),e.noSuppliersAtCurrentLocation=!0,g.path("/get_notified")}else{var i={};i.filterValues=[];for(var j=!1,k=0;k<a.dairy_suppliers.length;k++){var l=a.dairy_suppliers[k];32===l.id&&(j=!0),l.select=!1,i.filterValues.push(l)}q(i),j||f.updatePromotionalProducts()}n=!0,e.$broadcast("popularBrandsUpdate")}).error(function(a,b){$log.error("Server failure while retrieving Popular suppliers")})},s={category:"milk",selectFilters:{brands:{},variants:{filterValues:[{name:"Whole Milk",value:"whole",select:!1},{name:"Cow Milk",value:"cow",select:!1},{name:"Toned Milk",value:"toned",select:!1},{name:"UHT Toned Milk",value:"UHT_toned",select:!1},{name:"Double Toned Milk",value:"double_toned",select:!1},{name:"Skimmed Milk",value:"skimmed",select:!1},{name:"Flavoured Milk",value:"flavored",select:!1}]}},priceFilter:{minPrice:20,maxPrice:120,floor:20,ceil:260}},t={category:"curd",selectFilters:{brands:{},variants:{filterValues:[{name:"Whole",value:"whole",select:!1},{name:"Toned",value:"toned",select:!1}]}},priceFilter:{minPrice:30,maxPrice:100,floor:20,ceil:120}},u={category:"ghee",selectFilters:{brands:{},variants:{filterValues:[{name:"Full Clarified",value:"full_clarified",select:!1},{name:"Half Clarified",value:"half_clarifies",select:!1}]}},priceFilter:{minPrice:250,maxPrice:750,floor:200,ceil:900}},v={category:"paneer",selectFilters:{brands:{},variants:{filterValues:[{name:"High Fat",value:"high_fat",select:!1},{name:"Medium Fat",value:"medium_fat",select:!1}]}},priceFilter:{minPrice:200,maxPrice:450,floor:150,ceil:600}},w={category:"khowa",selectFilters:{brands:{},variants:{filterValues:[{name:"Hardened",value:"hard",select:!1}]}},priceFilter:{minPrice:200,maxPrice:450,floor:150,ceil:600}},x={category:"sweets",selectFilters:{brands:{},variants:{filterValues:[{name:"Kaju Jali",value:"kaju_jali",select:!1},{name:"Badam Jali",value:"badam_jali",select:!1}]}},priceFilter:{minPrice:500,maxPrice:1200,floor:400,ceil:1400}},y=[s,t,u,v,w,x];q(p);var z=function(a,b,c){var d={};d.category=a.category,d.order=b,d.page=c,d.price__min=a.priceFilter.minPrice,d.price__max=a.priceFilter.maxPrice,d.supplier_id=[];for(var e=0;e<a.selectFilters.brands.filterValues.length;e++)1==a.selectFilters.brands.filterValues[e].select&&d.supplier_id.push(a.selectFilters.brands.filterValues[e].id);if(d.supplier_id.length>1){var f=d.supplier_id;f=f.join(","),d.supplier_id=f}d.variant=[];for(var g=0;g<a.selectFilters.variants.filterValues.length;g++)1==a.selectFilters.variants.filterValues[g].select&&d.variant.push(a.selectFilters.variants.filterValues[g].value);if(d.variant.length>1){var n=d.variant;n=n.join(","),d.variant=n}switch(0==d.supplier_id.length&&delete d.supplier_id,0==d.variant.length&&delete d.variant,a.category){case"milk":h=b;break;case"curd":i=b;break;case"ghee":j=b;break;case"paneer":k=b;break;case"khowa":l=b;break;case"sweets":m=b}var o={};return o.params=d,o},A=function(a){var b={};switch(a.category){case"milk":b=s;break;case"curd":b=t;break;case"ghee":b=u;break;case"paneer":b=v;break;case"khowa":b=w;break;case"sweets":b=x}for(var c in a)a[c]=a[c].split(",");for(var d=0;d<b.selectFilters.brands.filterValues.length;d++)a.hasOwnProperty("supplier_id")?b.selectFilters.brands.filterValues[d].select=a.supplier_id.indexOf(b.selectFilters.brands.filterValues[d].name)>-1:b.selectFilters.brands.filterValues[d].select=!1;for(var e=0;e<b.selectFilters.variants.filterValues.length;e++)a.hasOwnProperty("variant")?b.selectFilters.variants.filterValues[e].select=a.variant.indexOf(b.selectFilters.variants.filterValues[e].value)>-1:b.selectFilters.variants.filterValues[e].select=!1;return D(a.category[0],a.order[0],b),b},B=function(a,b,c){var d=c?function(b){return c(b[a])}:function(b){return b[a]};return b=[-1,1][+!!b],function(a,c){return a=d(a),c=d(c),b*((a>c)-(c>a))}},C=function(a,b){return"price_LH"==b?a.sort(B("price",!0,parseFloat)):"popularityIndex"==b?a.sort(B(b,!0,parseFloat)):a.sort(B(b,!1,parseFloat))},D=function(a,b,c){switch(a){case"milk":s=c,h=b;break;case"curd":t=c,i=b;break;case"ghee":u=c,j=b;break;case"paneer":v=c,k=b;break;case"khowa":w=c,l=b;break;case"sweets":x=c,m=b}},E=function(a){switch(a){case"milk":return s;case"curd":return t;case"ghee":return u;case"paneer":return v;case"khowa":return w;case"sweets":return x;default:return{}}},F=function(a){switch(a){case"milk":return h;case"curd":return i;case"ghee":return j;case"paneer":return k;case"khowa":return l;case"sweets":return m;default:return"price ASC"}};return r(),{getSortingList:function(){return o},sortList:function(a,b,c){return C(a,b,c)},createFilterParamObj:function(a,b,c){return z(a,b,c)},createFilterObjByParam:function(a){return A(a)},getFilterObjDataByCategory:function(a){return E(a)},getSortParamDataByCategory:function(a){return F(a)},getUpdatedSupplierList:function(){r()},getPopularBrandsStatus:function(){return n}}}]),fr_dairy.service("productService",["$http","$log","$rootScope","$location","promotionalProductService","$window","$timeout",function(a,b,c,d,e,f,g){var h=[],i=[],j=[],k=[],l=[],m=[],n="your area",o=function(a,b){var c=a.dairy_products;return c=c.concat(b.dairy_products),a.dairy_products=c,a.meta.current_page=b.meta.current_page,a},p=function(a,b,d){switch(b){case"milk":h=d?o(h,a):a,c.$broadcast("genericProductsUpdate",h);break;case"curd":i=d?o(i,a):a,c.$broadcast("genericProductsUpdate",i);break;case"ghee":j=d?o(j,a):a,c.$broadcast("genericProductsUpdate",j);break;case"paneer":k=d?o(k,a):a,c.$broadcast("genericProductsUpdate",k);break;case"khowa":l=d?o(l,a):a,c.$broadcast("genericProductsUpdate",l);break;case"sweets":m=d?o(m,a):a,c.$broadcast("genericProductsUpdate",m)}c.moreDataLoading=!1,c.showContentLoader=!1},q=function(c,d){a.get("api/v1/products",c).success(function(a,b){p(a,c.params.category,d)}).error(function(a,e){var f={};f.meta={current_page:1,data_length:0,total_count:0,total_pages:1},f.dairy_products=[],p(f,c.params.category,d),b.error("Server failure while retrieving Products Data")})},r=function(a){return a=a.replace(/_/g," "),a=a.charAt(0).toUpperCase()+a.slice(1)},s=function(a){switch(a){case"milk":return h;case"curd":return i;case"ghee":return j;case"paneer":return k;case"khowa":return l;case"sweets":return m;default:return{}}},t=function(){n=docCookies.getItem("location_name")},u=function(){v(),t();var a=docCookies.getItem("location_name");f.ga("send","event","Info","GPS Location Name Entered","Location: "+a)},v=function(){h=[],i=[],j=[],k=[],l=[],m=[],e.clearPromotionalProducts()};return t(),{getFilteredProducts:function(a,b){b||(c.showContentLoader=!0),q(a,b)},getProductDataByCategory:function(a){return s(a)},getParsedString:function(a){return r(a)},getThumbnailURL:Util.getThumbnailURL,getCurrentLocation:function(){return n},locationChanged:function(){u()}}}]),fr_dairy.service("promotionalProductService",["$rootScope",function(a){var b=[],c=[{id:143,price:42,discounted_price:40.5,slug:"milky-plus-toned-milk",image_url:"//dhijs6fmog8z.cloudfront.net/uploads/dairy/product/image/143/Toned_Milk.jpg",supplier:{id:32,name:"Milky Plus"},category:{name:"milk"},variant:{name:"toned"},reviews:{rating:4.4,count:0}},{id:145,price:460,discounted_price:441.9,image_url:"//dhijs6fmog8z.cloudfront.net/uploads/dairy/product/image/145/Ghee.jpg",supplier:{id:32,name:"Milky Plus"},category:{name:"ghee"},variant:{name:"full_clarified"},reviews:{rating:4.4,count:0}},{id:146,price:100,discounted_price:96,image_url:"//dhijs6fmog8z.cloudfront.net/uploads/dairy/product/image/146/Curd.jpg",supplier:{id:32,name:"Milky Plus"},category:{name:"curd"},variant:{name:"whole"},reviews:{rating:4.4,count:0}},{id:147,price:42,discounted_price:40.5,image_url:"//dhijs6fmog8z.cloudfront.net/uploads/dairy/product/image/147/Cow_Milk.jpg",supplier:{id:32,name:"Milky Plus"},category:{name:"milk"},variant:{name:"cow"},reviews:{rating:4.4,count:0}}],d=function(){b=c,a.$broadcast("promotionalProductsUpdate",b)};return{clearPromotionalProducts:function(){b=[],a.$broadcast("promotionalProductsUpdate",b)},updatePromotionalProducts:function(){d()},getPromotionalProducts:function(){return b}}}]),fr_dairy.service("myCartAndCheckoutService",["$http","$log","$rootScope","productService","$timeout","$window",function(a,b,c,d,e,f){var g,h=function(a){if(g=[],a.objects.length>0)for(var b=0;b<a.objects.length;b++){for(var d=a.objects[b],e=0;e<d.sub_line_items.length;e++){var f=d.sub_line_items[e];f.product;f.productId=d.sub_line_items[e].product.id}g.push(d)}return c.$broadcast("myCartUpdate",g),g},i=function(){a.get("api/v1/cart").success(function(a,b){return h(a)}).error(function(a,d){return b.error("Server failure while retrieving Cart Data"),g=[],c.$broadcast("myCartUpdate",g),g})},j=function(a){for(var b=!1,d=0;d<g.length;d++)if(g[d].id==a.id){g[d]=a,b=!0;break}for(var d=0;d<a.sub_line_items.length;d++){a.sub_line_items[d]}b||g.push(a),c.$broadcast("myCartUpdate",g),Util.showCart()},k=function(c){a.post("api/v1/line_items",c).success(function(a,b){f.ga("send","event","Info","Supplier Item added to cart","For Supplier: "+a.line_item.supplier.name),f.ga("send","event","Conversion click events","Product added to cart","For Product: "+c.line_item.sub_line_items[0].name),j(a.line_item)}).error(function(a,c){b.error("Server failure while setting Cart Data")})},l=function(a,b,c,d,e,f){var g={line_item:{distributor_id:b,subscription_period:e,sub_line_items:[{product_id:a.id,quantity:c,name:f}]}};k(g)},m=function(d){a["delete"]("api/v1/line_items/"+d).success(function(a,b){for(var e=0;e<g.length;e++)if(g[e].id==d){g.splice(e,1);break}c.$broadcast("myCartUpdate",g)}).error(function(a,c){b.error("Server failure while setting Cart Data")})},n=function(a){m(a)};e(function(){i()},1500);var o=function(){window.location.href=window.location.protocol+"//"+window.location.host+"/order/checkout"};return{addToMyCart:function(a,b,c,d,e,f){l(a,b,c,d,e,f)},addOTDItemsToMyCart:function(a){k(a)},getAllCartItems:function(){return i()},removeFromMyCart:function(a){n(a)},checkOutNow:function(){o()}}}]),function(){function a(){$("body").on("click",".js-shopping-cart",function(a){a.preventDefault(),Util.toggleCartVisibility()}),$(".js-order-list").on("click",".continue-shopping",Util.toggleCartVisibility),$(".js-mask").on("click",Util.hideCart)}function b(){$(".js-location-selector").each(function(){var a={el:this,onLocationSet:function(a,b,c){h[0].currentGPSPosition.lat=a,h[0].currentGPSPosition["long"]=b,h[0].currentGPSPosition.name=c,h[1].currentGPSPosition.lat=a,h[1].currentGPSPosition["long"]=b,h[1].currentGPSPosition.name=c,h[0].openMapModal(a,b,c),h[0].updateCookie(a,b,c);var d=angular.element(document.getElementById("ajs-location-picker")).scope();d.$apply(function(){d.mobile_location_picker_visible&&d.locationSelectedOnMobile()})}},b=new LocationSelector(a);b.init(),h.push(b)})}function c(a){h[0].currentGPSPosition.lat=a.coords.latitude,h[0].currentGPSPosition["long"]=a.coords.longitude,h[1].currentGPSPosition.lat=a.coords.latitude,h[1].currentGPSPosition["long"]=a.coords.longitude,$.when(h[0].getGeoName(h[0].currentGPSPosition.lat,h[0].currentGPSPosition["long"])).then(function(a){a.results.length>0?(h[0].currentGPSPosition.name=a.results[0].address_components[1].long_name+", "+a.results[0].address_components[2].long_name,h[1].currentGPSPosition.name=a.results[0].address_components[1].long_name+", "+a.results[0].address_components[2].long_name):(h[0].currentGPSPosition.name="Your Location",h[1].currentGPSPosition.name="Your Location"),h[0].openMapModal(),h[0].updateCookie(h[0].currentGPSPosition.lat,h[0].currentGPSPosition["long"],h[0].currentGPSPosition.name),h[0].reinitialize(),h[1].reinitialize()})}function d(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(c)}function e(a,b){var c={zoom:16,center:new google.maps.LatLng(a,b),mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),c)}function f(){var a=function(a){var b=$(a.currentTarget).parents(".js-floating-nav-container"),c=b.find(".js-floating-nav"),d=b.find(".js-floating-nav-trigger");c.toggleClass("is-visible"),d.toggleClass("is-open")};$(".js-floating-nav-trigger").on("click",function(b){b.preventDefault(),a(b)})}function g(){h[0].updateCookie(h[0].currentGPSPosition.lat,h[0].currentGPSPosition["long"],h[0].currentGPSPosition.name),h[0].closeMapModal();var a=angular.element(document.getElementById("ajs-location-picker")).scope();a.$apply(function(){a.gpsLocationChanged()})}var h=[];window.onload=function(){b(),a(),f(),$("body").on("click",".js-filters-toggle",function(){$(".js-filter-panel-wrapper").toggleClass("invisible-sm"),$("body").toggleClass("noscroll")}),$("body").on("mouseup",function(a){$(a.target).closest(".popover").length||$(".popover").each(function(){$(this.previousSibling).popover("hide")})}),$(".js-btn-get-current-gps").on("click",d),$("#js-locate-me-modal").on("shown.bs.modal",function(){google.maps.event.trigger(map,"resize"),e(h[0].currentGPSPosition.lat,h[0].currentGPSPosition["long"]),google.maps.event.addListener(map,"dragend",function(){var a=map.getCenter().toUrlValue().split(",");h[0].currentGPSPosition.lat=a[0],h[0].currentGPSPosition["long"]=a[1],h[1].currentGPSPosition.lat=a[0],h[1].currentGPSPosition["long"]=a[1],$.when(h[0].getGeoName(h[0].currentGPSPosition.lat,h[0].currentGPSPosition["long"])).then(function(a){a.results.length>0?(h[0].currentGPSPosition.name=a.results[0].address_components[1].long_name+", "+a.results[0].address_components[2].long_name,h[1].currentGPSPosition.name=a.results[0].address_components[1].long_name+", "+a.results[0].address_components[2].long_name):(h[0].currentGPSPosition.name="Your Location",h[1].currentGPSPosition.name="Your Location")})})}),$("#js-map-location-selector").on("click",g)}}(),angular.module("fr_dairy").run(["$templateCache",function(a){"use strict";a.put("partials/pages/generic_products.html",'<div id="js-generic-products" class="row col-md-2 col-md-offset-1 filter-panel-wrapper invisible-sm js-filter-panel-wrapper filter-panel-custom-styles"\r\n     data-ng-class="ng-cloak">\r\n    <filter-panel directive-for="webApp"\r\n                  class="hidden-sm hidden-xs"\r\n                  get-filtered-data-at-controller="getProductsNow();"\r\n                  category-name="categoryName"\r\n                  first-load="firstLoad" filter-obj="filterObj" data-ng-class="noSuppliersAtCurrentLocation? \'disabled-mask\' : \'\'">\r\n    </filter-panel>\r\n    <filter-panel directive-for="mobile"\r\n                  class="visible-sm visible-xs"\r\n                  get-filtered-data-at-controller="getProductsNow();"\r\n                  category-name="categoryName"\r\n                  first-load="firstLoad"\r\n                  filter-obj="filterObj">\r\n    </filter-panel>\r\n    <div class="panel panel-default hidden-xs hidden-sm border-on-hover space-on-right" data-ng-hide="noSuppliersAtCurrentLocation">\r\n        <div class="panel-body text-center space-on-top">\r\n            <p>Didn\'t find your favorite Milk Brand here?</p>\r\n            <p class="text-center clear-margin space-on-bottom">\r\n                <!--<a href="#!/suggest_new_supplier" class="btn btn-default">Help us add them!</a>-->\r\n                <a href="/contact" target="_blank" class="btn btn-default">Help us add them!</a>\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="visible-xs visible-sm">\r\n    <button class="filters-toggle js-filters-toggle">\r\n        <span class="text-uppercase filters-text">Filters</span>\r\n    </button>\r\n</div>\r\n\r\n<div id="js-products-panel-start" class="row results col-md-7" infinite-scroll=\'loadMore()\' infinite-scroll-disabled=\'(moreDataLoading)||(noMoreData)||(GenericProducts.meta.current_page == GenericProducts.meta.total_pages)\'>\r\n    <div class="panel panel-default result-panel-wrapper">\r\n        <div class="panel-heading clearfix">\r\n            <div class="result-desc">\r\n              <div class="clearfix">\r\n                <div class="pull-left result-info">\r\n                  Showing\r\n                  <!--<b>{{GenericProducts.dairy_products.length}}</b> of-->\r\n                  results for\r\n                  <b>{{category}}</b> at <span id="js-current-location-text" class="current-location-text"><b>{{currentLocation}}</b></span>\r\n                </div>\r\n                <div class="pull-left change-location-wrapper visible-xs" data-ng-click="changeLocOnMbl();">\r\n                    <small>\r\n                  <a class="change-location js-change-location">\r\n                    <i class="fa fa-map-marker"></i>\r\n                    Change Location\r\n                  </a>\r\n                    </small>\r\n                </div>\r\n                  <div class="pull-left change-location-wrapper hidden-xs" data-ng-click="changeLocOnDesktop();">\r\n                      <small>\r\n                          <a class="change-location js-change-location">\r\n                              <i class="fa fa-map-marker"></i>\r\n                              Change Location\r\n                          </a>\r\n                      </small>\r\n                  </div>\r\n                <div class="pull-right sort-wrapper" data-ng-class="noSuppliersAtCurrentLocation? \'disabled-mask\' : \'\'">\r\n                  <sorting-box get-sorted-data-at-controller="getProductsNow();" sort-param="sortParam"></sorting-box>\r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div style="padding-bottom: 0px" class="panel-body" data-ng-hide="GenericProducts.meta.data_length==0">\r\n            <!--<promotional-product-panel class="disabled-mask" data-ng-repeat="productObj in promotionalProducts" data-ng-show="productObj.category.name==category" supplier-product="productObj"></promotional-product-panel>-->\r\n            <!--<product-panel data-ng-repeat="productObj in promotionalProducts" product="productObj" directive-for="promotionProducts" data-ng-if="productObj.category.name==category"></product-panel>-->\r\n            <product-panel data-ng-repeat="productObj in GenericProducts.dairy_products" product="productObj" directive-for="mainPageProducts"></product-panel>\r\n        </div>\r\n        <no-results-found data-ng-if="GenericProducts.meta.data_length==0"></no-results-found>\r\n        <div class="loading-results-div" data-ng-if="moreDataLoading" data-ng-hide="GenericProducts.meta.total_pages==1"><p>Fetching products<span class="loading-results-dot loading-results-one">.</span><span class="loading-results-dot loading-results-two">.</span><span class="loading-results-dot loading-results-three">.</span></p></div>\r\n        <!--<div class="loading-results-div" data-ng-if="noMoreData" data-ng-hide="GenericProducts.meta.total_count==0"><p>No more results</p></div>-->\r\n        <!--<div class="clearfix">\r\n          <div class="col-md-12">\r\n            <div class="well well-sm bg-white text-center text-muted"\r\n                 data-ng-hide="(GenericProducts.meta.current_page!=GenericProducts.meta.total_pages)||(GenericProducts.meta.data_length==0)">\r\n              No more products\r\n            </div>\r\n          </div>\r\n        </div>-->\r\n        <div class="panel panel-default visible-xs visible-sm border-on-hover text-center" data-ng-if="GenericProducts.meta.data_length!=0">\r\n            <div class="panel-body">\r\n                <i class="fa fa-check space-on-right"></i>No. 1 Quality\r\n            </div>\r\n            <div class="panel-body">\r\n                <i class="fa fa-check space-on-right"></i>Fresh Products\r\n            </div>\r\n            <div class="panel-body">\r\n                <i class="fa fa-check space-on-right"></i>Daily Delivery\r\n            </div>\r\n            <div class="panel-body">\r\n                <i class="fa fa-check space-on-right"></i>On time Delivery\r\n            </div>\r\n            <div class="panel-body">\r\n                <i class="fa fa-check space-on-right"></i>Pay Online / COD\r\n            </div>\r\n        </div>\r\n        <div class="panel panel-default visible-xs visible-sm border-on-hover text-center" data-ng-if="GenericProducts.meta.data_length!=0">\r\n            <div class="panel-body text-center space-on-top">\r\n                <p>Know the latest offers and discounts at your location!</p>\r\n\r\n                <p class="text-center clear-margin space-on-bottom">\r\n                    <a href="#!/get_notified" class="btn btn-default">Subscribe Mail</a>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="hidden-xs hidden-sm row col-md-2 foodraft-benefits" data-ng-hide="noSuppliersAtCurrentLocation">\r\n      <div class="panel panel-default border-on-hover">\r\n        <div class="panel-body">\r\n            <i class="fa fa-check space-on-right"></i>No. 1 Quality\r\n        </div>\r\n        <div class="panel-body">\r\n            <i class="fa fa-check space-on-right"></i>Fresh Products\r\n        </div>\r\n        <div class="panel-body">\r\n            <i class="fa fa-check space-on-right"></i>Daily Delivery\r\n        </div>\r\n        <div class="panel-body">\r\n            <i class="fa fa-check space-on-right"></i>On time Delivery\r\n        </div>\r\n        <div class="panel-body">\r\n            <i class="fa fa-check space-on-right"></i>Pay Online / COD\r\n        </div>\r\n      </div>\r\n\r\n        <!--<div class="panel panel-default border-on-hover">\r\n            <div class="panel-body text-center space-on-top">\r\n                <p><b>Get FREE Milk for 5 days</b><span class="text-muted-lighter">*</span> on your 1st monthly order.</p>\r\n                <p><b>Coupon code: FRSD5</b></p>\r\n                <h6 class="text-muted-lighter cdtn-aply">*Milk of the same brand as of order placed. 2 Free days for a 7 days\' order, and 5 Free days for a monthly order.</h6>\r\n                &lt;!&ndash;<p class="text-center clear-margin space-on-bottom">\r\n                    Use Code: <b>FRS1</b>\r\n                </p>&ndash;&gt;\r\n            </div>\r\n        </div>-->\r\n\r\n\r\n      <div class="panel panel-default border-on-hover">\r\n        <div class="panel-body text-center space-on-top">\r\n          <p>Know the latest offers and discounts at your location!</p>\r\n\r\n          <p class="text-center clear-margin space-on-bottom">\r\n            <a href="#!/get_notified" class="btn btn-default">Subscribe Mail</a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n        <!--<div class="panel panel-default border-on-hover">\r\n            <h5 class="text-center text-info space-on-top-xl">\r\n                <i class="fa fa-bullhorn space-on-right"></i>\r\n                Other brands coming soon\r\n            </h5>\r\n\r\n            <div class="panel-body text-center clear-padding-top">\r\n                <img src="//dhijs6fmog8z.cloudfront.net/coming_soon/heritage.jpg"\r\n                     alt="Heritage">\r\n                <img src="//dhijs6fmog8z.cloudfront.net/coming_soon/vijaya.jpg"\r\n                     alt="Vijaya" class="pull-left space-on-top-lg">\r\n                <img src="//dhijs6fmog8z.cloudfront.net/coming_soon/jersey.jpg"\r\n                     alt="Jersey" class="pull-right">\r\n                <img src="//dhijs6fmog8z.cloudfront.net/coming_soon/al_safa.jpg"\r\n                     alt="Al Safa" class="space-on-bottom-lg">\r\n            </div>\r\n        </div>-->\r\n\r\n\r\n    </div>\r\n</div>\r\n'),a.put("partials/pages/product_detail.html",'<div class="row clearfix">\r\n  <a class="floating-nav-trigger btn-orange visible-xs visible-sm" data-ng-click="clickFloatingBuy();">\r\n    <span>BUY</span>\r\n  </a>\r\n  <div class="fr-container col-md-10 col-md-offset-1">\r\n    <div id="js-back-button" class="padded border-bottom pd-back-button">\r\n      <a class="btn btn-default btn-sm" href="#!/products/milk">\r\n        <i class="fa fa-chevron-left icon-left"></i>\r\n        Back\r\n      </a>\r\n    </div>\r\n\r\n    <section class="fr-section">\r\n      <div class="product-detail row clearfix">\r\n        <div class="col-sm-4 col-md-4">\r\n          <div class="text-center">\r\n            <img data-ng-src="{{product.detail_image_url}}" alt="" class="product-detail-img">\r\n          </div>\r\n        </div>\r\n\r\n        <div class="col-sm-8 col-md-8 product-info-wrapper">\r\n\r\n          <hr class="visible-xs">\r\n\r\n          <product-panel product="product" directive-for="productDetail" data-ng-if="showProductPanel"></product-panel>\r\n\r\n          <span data-ng-hide="showOrderDetailsForm">\r\n          <hr>\r\n          <span class="display-inline-block space-on-right-xl">\r\n            <img src="/assets/images/fat.a0f4e0fb81584902.png" alt="" class="space-on-right">\r\n            <b>{{nutritionDetails.nutrition_parameters[0].value}} {{nutritionDetails.nutrition_parameters[0].units}} Fat</b>\r\n          </span>\r\n          <span class="display-inline-block">\r\n            <img src="/assets/images/snf.4ad4f7a755feb9f9.png" alt="" class="space-on-right">\r\n            <b>{{nutritionDetails.nutrition_parameters[1].value}} {{nutritionDetails.nutrition_parameters[1].units}} SNF</b>\r\n          </span>\r\n\r\n          <!--<p>\r\n            <img src="/assets/images/cup.png" alt="">\r\n            <b>\r\n              Serves 2 cups\r\n            </b>\r\n          </p>\r\n          <p>\r\n            <b>\r\n              <i class="fa fa-thumbs-o-up fa-lg space-on-right"></i>\r\n              Best if you are looking to gain weight\r\n            </b>\r\n          </p>-->\r\n\r\n          <hr>\r\n\r\n          <p class="lead">\r\n            {{product.description}}\r\n          </p>\r\n\r\n          <p class="text-center clear-margin">\r\n            <small class="text-muted">\r\n              Best before {{product.validity_period}} days from the date of packaging\r\n            </small>\r\n          </p>\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <hr>\r\n\r\n      <div class="row">\r\n        <h3 class="text-center clear-margin-top">\r\n          <img src="/assets/images/nutrition-icon.bff795c8c7ccf4b2.png" alt=""\r\n               class="space-on-right">\r\n          <span class="align-middle">Nutrition Information</span>\r\n        </h3>\r\n\r\n        <div class="col-sm-6 col-sm-offset-3 space-on-top-lg">\r\n          <table class="table table-bordered">\r\n            <tbody>\r\n              <tr data-ng-repeat="fact in nutritionDetails.nutrition_parameters">\r\n                <td class="text-center">{{fact.display_name}} (in {{fact.units}})</td>\r\n                <td class="text-center">{{fact.value}}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <hr>\r\n\r\n      <div class="row clearfix">\r\n        <div class="col-md-12">\r\n          <h3 class="clear-margin-top reviews-title">\r\n            <span class="align-middle review-for">\r\n              Reviews for {{productName}} from {{product.supplier.name}}\r\n            </span>\r\n          </h3>\r\n\r\n          <div class="space-on-top">\r\n            <div class="review-summary-wrapper">\r\n              <!--<span class="display-inline-block fr-view-rating-div rating-bg-8 clear-margin-left">\r\n                <span>{{product.reviews.rating}}</span>\r\n              </span>-->\r\n              <div class="rating-summary text-center">\r\n                <color-rating-panel-viewable directive-for="webApp"\r\n                                             rating="product.reviews.rating"\r\n                                             class="clear-margin"\r\n                                             product-id="product.id"\r\n                                             index-at-page="3"></color-rating-panel-viewable>\r\n\r\n                <div data-ng-hide="product.reviews.count==0" class="space-on-top-sm">\r\n                  <small class="text-muted">\r\n                    ({{product.reviews.count}} ratings)\r\n                  </small>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="review-button-wrapper">\r\n                <p class="clear-line-height">\r\n                  Have you bought this product before?\r\n                </p>\r\n\r\n                <button class="btn btn-primary text-uppercase btn-sm" data-ng-hide="showAddReviewBox" data-ng-click="openReviewPanel();">\r\n                  <small>Write a review</small>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="panel panel-default review-panel space-on-top-lg" data-ng-if="showAddReviewBox">\r\n            <div class="panel-body revw-bx-mbl">\r\n              <div class="col-md-7 review-form-wrapper">\r\n                <form action="">\r\n                  <div class="form-group">\r\n                    <color-rating-panel-editable s="$parent.newReview.ratingBoxValue"></color-rating-panel-editable>\r\n                    <span class="text-danger" data-ng-show="$parent.showRatingError">Please rate the product.</span>\r\n                  </div>\r\n\r\n                  <div class="form-group">\r\n                    <input title="Name" type="text" id="reviewers-name"\r\n                           class="form-control"\r\n                           placeholder="Your Name"\r\n                           data-ng-model="$parent.newReview.name" required="true">\r\n                  </div>\r\n\r\n                  <div class="form-group">\r\n                    <textarea title="Review Description"\r\n                              class="form-control"\r\n                              placeholder="Your Review*"\r\n                              data-ng-model="$parent.newReview.description" required="true"></textarea>\r\n                  </div>\r\n\r\n                  <div class="form-group">\r\n                    <button class="btn btn-primary" type="submit" data-ng-click="$parent.publishReview();" data-ng-disabled="$parent.publishReviewButtonText==\'Publishing...\'">\r\n                      {{publishReviewButtonText}}\r\n                    </button>\r\n                    <button class="space-on-left-lg btn btn-default" data-ng-click="$parent.showAddReviewBox=false;">Cancel</button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n\r\n              <div class="col-md-5">\r\n                <p class="text-muted">\r\n                  *Writing an honest review will help others take informed decisions while purchasing this product.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class="col-md-12 space-on-bottom-lg">\r\n          <hr>\r\n          <ul class="list-unstyled" data-ng-hide="product.reviews.count==0">\r\n            <li class="bordered-bottom product-review" data-ng-repeat="review in allReviewsData.dairy_product_reviews">\r\n              <div class="review-meta">\r\n                <small>{{review.user.name}}</small>\r\n                <br>\r\n                <small class="text-muted">{{review.daysAgo}}</small>\r\n              </div>\r\n\r\n              <div class="review-detail">\r\n                <p class="clear-margin-bottom">\r\n                  <small class="space-on-right-sm">\r\n                    <b class="align-middle">Rated</b>\r\n                  </small>\r\n                  <span class="align-middle inline-block">\r\n                    <color-rating-panel-viewable directive-for="webApp" rating="review.rating" product-id="review.id" type="mini" index-at-page="1"></color-rating-panel-viewable>\r\n                  </span>\r\n                </p>\r\n                <p class="clear-margin-bottom">\r\n                    {{review.description}}\r\n                </p>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n\r\n          <div class="panel default-state"\r\n               data-ng-show="product.reviews.count==0&&!showAddReviewBox">\r\n            <div class="panel-body">\r\n              <p class="text-center text-muted clear-margin">\r\n                No reviews found.\r\n                <a class="clickable link-disguise"\r\n                   data-ng-click="openReviewPanel();">\r\n                  Be the first one to review this product!\r\n                </a>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n   </section>\r\n  </div>\r\n</div>\r\n'),
a.put("partials/pages/subscribe_mail.html",'<div class="row fr-container col-md-10 col-md-offset-1 space-on-top-xl">\r\n  <div class="panel panel-transparent">\r\n    <div class="panel-body">\r\n      <span data-ng-hide="showLoader">\r\n          <h2 class="text-center" data-ng-hide="noSuppliersAtCurrentLocation">Know the latest offers and discounts at {{currentLocation}}!</h2>\r\n          <h2 class="text-center" data-ng-show="noSuppliersAtCurrentLocation">We will be at {{currentLocation}} soon!</h2>\r\n          <div class="change-location-wrapper visible-xs text-center" data-ng-click="changeLocOnMbl();">\r\n              <small>\r\n                  <a class="change-location js-change-location">\r\n                      <i class="fa fa-map-marker"></i>\r\n                      Change Location\r\n                  </a>\r\n              </small>\r\n          </div>\r\n\r\n          <p class="lead text-center space-on-top-xl" data-ng-hide="subscriptionSuccess">\r\n              Subscribe to us for updates\r\n          </p>\r\n      </span>\r\n        <div class="text-center" data-ng-show="showLoader">\r\n            <img class="space-on-top-xl space-on-bottom-xl" src="/assets/images/subscription_loader.31e7d6b879791c72.gif">\r\n        </div>\r\n\r\n\r\n        <form name="subscriptionForm" class="form-inline text-center subscription-form" data-ng-hide="subscriptionSuccess">\r\n        <div class="form-group text-center">\r\n          <input id="email"\r\n                 name="email"\r\n                 type="email"\r\n                 placeholder="Your email"\r\n                 class="form-control space-on-right"\r\n                 data-ng-model="userEmail"\r\n                 required="true">\r\n        </div>\r\n        <div class="form-group text-center">\r\n          <input id="phone"\r\n                 name="phone"\r\n                 type="phone"\r\n                 placeholder="Your Phone Number"\r\n                 class="form-control space-on-right"\r\n                 data-ng-model="userPhone"\r\n                 data-ng-pattern="/^[0-9]{10}$/"\r\n                 required="true">\r\n                  \r\n        </div>\r\n        <button type="submit"\r\n                class="btn btn-primary"\r\n                data-ng-click="clickSubscribe()"\r\n                data-ng-disabled="buttonText==\'Subscribing...\'">{{buttonText}}</button>\r\n\r\n                <div>\r\n                  <small class="text-danger" data-ng-show="subscriptionForm.phone.$error.pattern">\r\n                    Please enter a valid 10 digit phone number (skip +91)\r\n                  </small>\r\n                </div>\r\n      </form>\r\n\r\n      <div class="clearfix" data-ng-show="subscriptionSuccess">\r\n        <div class="col-md-10 col-md-offset-1">\r\n          <p class="alert alert-success">\r\n            <b>Almost there!</b>\r\n\r\n            <br><br>\r\n\r\n            Please confirm your email by clicking the link in the mail we just sent you.\r\n\r\n            <br><br>\r\n            Team Foodraft\r\n          </p>\r\n\r\n          <hr>\r\n\r\n          <div class="fb-like" data-href="https://facebook.com/foodraft" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>\r\n\r\n          <div id="fb-root"></div>\r\n          <script>(function(d, s, id) {\r\n            var js, fjs = d.getElementsByTagName(s)[0];\r\n            if (d.getElementById(id)) return;\r\n            js = d.createElement(s); js.id = id;\r\n            js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=717801281624336&version=v2.0";\r\n            fjs.parentNode.insertBefore(js, fjs);\r\n'+"          }(document, 'script', 'facebook-jssdk'));</script>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n"),a.put("partials/pages/suggest_new_supplier.html",'<div class="row fr-container col-md-10 col-md-offset-1 space-on-top-xl">\r\n  <div class="panel panel-transparent">\r\n    <div class="panel-body">\r\n      <h2 class="text-center">Suggest a Local Milk Brand at {{currentLocation}}!</h2>\r\n\r\n      <p class="lead text-center space-on-top-xl" data-ng-hide="submissionSuccess">\r\n        Help us add your favorite products\r\n      </p>\r\n\r\n      <form name="subscriptionForm" class="form-inline text-center subscription-form" data-ng-hide="submissionSuccess">\r\n        <div class="form-group text-center">\r\n            <input id="supplierName"\r\n                   name="supplierName"\r\n                   type="text"\r\n                   placeholder="Local Brand\'s Name"\r\n                   class="form-control space-on-right"\r\n                   data-ng-model="supplierName"\r\n                   required="true">\r\n        </div>\r\n        <div class="form-group text-center">\r\n            <input id="supplierPhone"\r\n                   name="supplierPhone"\r\n                   placeholder="Local Brand\'s Number"\r\n                   class="form-control space-on-right"\r\n                   data-ng-model="supplierNumber"\r\n                   data-ng-pattern="/^[0-9]{10}$/"\r\n                   required="true">\r\n            <p class="text-danger" data-ng-show="subscriptionForm.supplierPhone.$error.pattern">\r\n              <small>Please enter a valid 10 digit phone number</small>\r\n            </p>\r\n        </div>\r\n        <div class="form-group text-center">\r\n            <input id="email"\r\n                   name="email"\r\n                   type="email"\r\n                   placeholder="Your email"\r\n                   class="form-control space-on-right"\r\n                   data-ng-model="userEmail"\r\n                   required="true">\r\n        </div>\r\n        <button type="submit"\r\n                class="btn btn-primary"\r\n                data-ng-click="clickSubmit()"\r\n                data-ng-disabled="(buttonText==\'Submitting...\')||(subscriptionForm.supplierPhone.$error.pattern)">{{buttonText}}</button>\r\n      </form>\r\n\r\n      <div class="clearfix" data-ng-show="submissionSuccess">\r\n        <div class="col-md-10 col-md-offset-1">\r\n          <p class="alert alert-success">\r\n            <b>Thank you!</b>\r\n\r\n            <br><br>\r\n\r\n            We\'ll add the products of your brand/local-supplier soon, and hope to serve you better.\r\n\r\n            <br><br>\r\n            Team Foodraft\r\n          </p>\r\n\r\n          <hr>\r\n\r\n          <div class="fb-like" data-href="https://facebook.com/foodraft" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>\r\n\r\n          <div id="fb-root"></div>\r\n          <script>(function(d, s, id) {\r\n            var js, fjs = d.getElementsByTagName(s)[0];\r\n            if (d.getElementById(id)) return;\r\n            js = d.createElement(s); js.id = id;\r\n            js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=717801281624336&version=v2.0";\r\n            fjs.parentNode.insertBefore(js, fjs);\r\n'+"          }(document, 'script', 'facebook-jssdk'));</script>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"),a.put("partials/pages/supplier_detail.html",'<div class="row col-md-10 col-md-offset-1">\r\n  <div class="panel panel-default product-detail">\r\n    <div class="panel-body">\r\n      <h2>Supplier Name</h2>\r\n      <p>\r\n        Partnership, leverage outcomes working families civic engagement,\r\n        sustainability; fight against malnutrition experience in the field\r\n        participatory monitoring. Beneficiaries, altruism, inclusive; amplify\r\n        tackling; cause social good organization. Expanding community ownership, developing.\r\n      </p>\r\n      <button class="btn btn-primary">\r\n        Products by this supplier\r\n      </button>\r\n\r\n      <hr>\r\n\r\n      <h3>Reviews & Ratings</h3>\r\n      <div class="supplier-feedback">\r\n        <div>\r\n          <span class="rating--star">\r\n            <i class="fa fa-star fa-4x"></i>\r\n            <span class="rating__value">3.5</span>\r\n          </span>\r\n        </div>\r\n        <small>Based on 300 ratings.</small>\r\n      </div>\r\n      <ul class="list-unstyled">\r\n          <li class="review panel panel-default">\r\n              <div class="panel-body">\r\n                  <div class="col-md-2">\r\n                      <a>Bane</a>\r\n                      <b>24-24-2104</b>\r\n                  </div>\r\n                  <p class="col-md-10">\r\n                      <b>Review Title</b><rating-panel rating="4"></rating-panel><br>\r\n                      It\'s good\r\n                  </p>\r\n              </div>\r\n\r\n              <div class="panel-footer clearfix">\r\n                  <div class="pull-right">\r\n                      Was this review helpful?\r\n                      <i class="fa fa-thumbs-up"></i> Yes\r\n                      <i class="fa fa-thumbs-down"></i> No\r\n                  </div>\r\n              </div>\r\n          </li>\r\n\r\n          <li class="review panel panel-default">\r\n              <div class="panel-body">\r\n                  <div class="col-md-2">\r\n                      <a>Bane</a>\r\n                      <b>24-24-2104</b>\r\n                  </div>\r\n                  <p class="col-md-10">\r\n                      <b>Review Title</b><rating-panel rating="4"></rating-panel><br>\r\n                      It\'s good\r\n                  </p>\r\n              </div>\r\n\r\n              <div class="panel-footer clearfix">\r\n                  <div class="pull-right">\r\n                      Was this review helpful?\r\n                      <i class="fa fa-thumbs-up"></i> Yes\r\n                      <i class="fa fa-thumbs-down"></i> No\r\n                  </div>\r\n              </div>\r\n          </li>\r\n      </ul>\r\n\r\n      <ul class="pager">\r\n          <li class="previous"><a data-ng-hide="reviewsData.meta.current_page==1" data-ng-click="previousReviews();">&larr; Previous</a></li>\r\n          <li class="next"><a data-ng-hide="reviewsData.meta.current_page==reviewsData.meta.total_pages" data-ng-click="nextReviews();">Next &rarr;</a></li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</div>\r\n'),a.put("partials/templates/colorRatingPanelEditable.html",'<span>\r\n    <div class="fr-editable-rating-div" data-ng-mouseenter="r=r;s=s" data-ng-mouseleave="r=0;s=s" data-ng-init="r=0;s=0;">\r\n        <div class="display-inline-block space-on-left space-on-right clickable"><strong><span class="hidden-xs">Your rating</span><span class="visible-xs">Rating</span></strong></div>\r\n        <div class="display-inline-block">\r\n            <a data-ng-class="{true:\'rating-bg-1\', false:\'rating-bg-null\'}[r>=1||s>=1]" data-ng-mouseenter="r=1" data-ng-mouseleave="r=1" data-ng-click="s=1;">&nbsp;</a>\r\n            <a data-ng-class="{true:\'rating-bg-2\', false:\'rating-bg-null\'}[r>=2||s>=2]" data-ng-mouseenter="r=2" data-ng-mouseleave="r=2" data-ng-click="s=2;">&nbsp;</a>\r\n            <a data-ng-class="{true:\'rating-bg-3\', false:\'rating-bg-null\'}[r>=3||s>=3]" data-ng-mouseenter="r=3" data-ng-mouseleave="r=3" data-ng-click="s=3;">&nbsp;</a>\r\n            <a data-ng-class="{true:\'rating-bg-4\', false:\'rating-bg-null\'}[r>=4||s>=4]" data-ng-mouseenter="r=4" data-ng-mouseleave="r=4" data-ng-click="s=4;">&nbsp;</a>\r\n            <a data-ng-class="{true:\'rating-bg-5\', false:\'rating-bg-null\'}[r>=5||s>=5]" data-ng-mouseenter="r=5" data-ng-mouseleave="r=5" data-ng-click="s=5;">&nbsp;</a>\r\n            <a data-ng-class="{true:\'rating-bg-6\', false:\'rating-bg-null\'}[r>=6||s>=6]" data-ng-mouseenter="r=6" data-ng-mouseleave="r=6" data-ng-click="s=6;">&nbsp;</a>\r\n            <a data-ng-class="{true:\'rating-bg-7\', false:\'rating-bg-null\'}[r>=7||s>=7]" data-ng-mouseenter="r=7" data-ng-mouseleave="r=7" data-ng-click="s=7;">&nbsp;</a>\r\n            <a data-ng-class="{true:\'rating-bg-8\', false:\'rating-bg-null\'}[r>=8||s>=8]" data-ng-mouseenter="r=8" data-ng-mouseleave="r=8" data-ng-click="s=8;">&nbsp;</a>\r\n            <a data-ng-class="{true:\'rating-bg-9\', false:\'rating-bg-null\'}[r>=9||s>=9]" data-ng-mouseenter="r=9" data-ng-mouseleave="r=9" data-ng-click="s=9;">&nbsp;</a>\r\n        </div>\r\n        <div data-ng-hide="(r==0)||(s!=0)" class="fr-editable-rating-num">{{(0.5 * (r+1))|number:1}}</div>\r\n        <div data-ng-show="(r==0)&&(s==0)" class="fr-editable-rating-num null-editing-rating-view">-</div>\r\n        <div data-ng-show="s!=0" class="fr-editable-rating-num">{{(0.5 * (s+1))|number:1}}</div>\r\n        <div class="clear-ratings-minus" data-ng-show="s!=0" data-ng-click="r=0;s=0;"><span class="fa-1 clickable">&times;</span></div>\r\n    </div>\r\n</span>\r\n'),a.put("partials/templates/colorRatingPanelViewable.html",'<div id="js-rating-box_{{productId}}_{{directiveFor}}_{{indexAtPage}}" class="display-inline-block align-middle fr-view-rating-div" data-ng-class="bgClass">\r\n    <span data-ng-hide="rating==0.0"> {{rating | number : 1}}</span>\r\n    <span data-ng-show="rating==0||rating==undefined||rating==null"> - </span>\r\n</div>\r\n'),a.put("partials/templates/filterPanel.html",'<div>\r\n  <div class="filter-panel-mobile panel panel-secondary control-panel"\r\n       data-ng-show="directiveFor==\'mobile\'">\r\n    <div class="panel-heading">\r\n      <h3 class="text-center clear-margin">\r\n        <i class="fa fa-filter space-on-right"></i>\r\n        Apply Filters\r\n      </h3>\r\n    </div>\r\n\r\n    <div class="panel-body">\r\n\r\n      <div class="filter-categories">\r\n        <a class="clickable filter-category"\r\n           ng-class="selected_filter_category==key ? \'active\' : \'\'"\r\n           ng-click="activateFilter(key)"\r\n           data-ng-repeat="(key,value) in filterObj.selectFilters">\r\n           {{categoryName}} {{key}}\r\n        </a>\r\n        <a class="clickable filter-category"\r\n           ng-class="selected_filter_category==\'price\' ? \'active\' : \'\'"\r\n           ng-click="activateFilter(\'price\')">\r\n          Price (per {{quantityUnit}})\r\n        </a>\r\n      </div>\r\n\r\n      <div class="filters">\r\n        <div class="filter-set"\r\n             data-ng-show="selected_filter_category==key"\r\n             data-ng-repeat="(key,value) in filterObj.selectFilters">\r\n          <dd data-ng-repeat="x in value.filterValues">\r\n            <label class="normal-font">\r\n              <input class="glyphicon"\r\n                     type="checkbox"\r\n                     data-ng-change="clickFilter();"\r\n                     data-ng-model="x.select">\r\n              &nbsp;&nbsp;&nbsp;{{x.name}}\r\n            </label>\r\n          </dd>\r\n        </div>\r\n\r\n        <div class="filter-set"\r\n             data-ng-show="selected_filter_category==\'price\'">\r\n\r\n          <div class="price-tag text-center">\r\n              <div class="pricePanel">\r\n                    <input type="text"\r\n                           class="price-tag-input input-sm form-control"\r\n                           data-ng-pattern="/[0-9]/"\r\n                           data-ng-model="directiveInputMinPrice"\r\n                           data-ng-change="mobilePriceFilterChanged();">\r\n              </div>\r\n\r\n              <div class="pricePanel">\r\n                    <div class="space-on-left-lg space-on-right-lg display-inline-block">To</div>\r\n                    <input type="text"\r\n                           class="price-tag-input input-sm form-control"\r\n                           data-ng-pattern="/[0-9]/"\r\n                           data-ng-model="directiveInputMaxPrice"\r\n                           data-ng-change="mobilePriceFilterChanged();">\r\n              </div>\r\n\r\n                <!-- <div class="filterGoButton" data-ng-show="directiveFor!=\'mobile\'">\r\n                  <a data-ng-click="clickFilter();"\r\n                     class="price-tag-go">\r\n                     <i class="goIcon semiRightArrow"></i>\r\n                  </a>\r\n                </div> -->\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="panel-footer">\r\n      <button class="btn btn-default btn-block js-filters-toggle"\r\n              type="button">\r\n        Close\r\n      </button>\r\n      <button type="button"\r\n              class="btn btn-block btn-primary js-filters-toggle"\r\n              data-ng-click="clickMobileFilter();">\r\n        Apply filters\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="panel panel-default control-panel space-on-bottom"\r\n       data-ng-show="directiveFor==\'webApp\'">\r\n    <div class="panel-body" data-ng-init="filterLength=5;">\r\n\r\n      <dl data-ng-repeat="(key,value) in filterObj.selectFilters">\r\n        <dt>{{categoryName}} {{key}}</dt>\r\n        <input id="filter_search_input_{{$index}}"\r\n               type="text"\r\n               data-ng-model="brandName"\r\n               class="form-control input-sm filter-panel-search"\r\n               placeholder="Search for {{key}}"\r\n               data-ng-show="(filterLength==value.filterValues.length)&&(value.filterValues.length>=10)">\r\n        <dd data-ng-repeat="x in value.filterValues | filter:{name:brandName} | customLimitTo:filterLength">\r\n          <label class="normal-font">\r\n            <input class="glyphicon"\r\n                   type="checkbox"\r\n                   data-ng-change="clickFilter();"\r\n                   data-ng-model="x.select">\r\n            &nbsp;&nbsp;&nbsp;{{x.name}}\r\n          </label>\r\n        </dd>\r\n\r\n        <a href=""\r\n          class="clickable text-muted expand-filter-list"\r\n          data-ng-click="filterLength=value.filterValues.length;"\r\n          data-ng-hide="(filterLength==value.filterValues.length)||(value.filterValues.length<=5)">\r\n          + See more\r\n        </a>\r\n      </dl>\r\n      <dl>\r\n        <dt>Price Range (per {{quantityUnit}})</dt>\r\n        <div class="space-on-top-xl space-on-bottom-xl" \r\n             data-ng-hide="directiveFor==\'mobile\'">\r\n          <!-- <slider floor-two="filterObj.priceFilter.floor"\r\n                  ceiling-two="filterObj.priceFilter.ceil"\r\n                  ng-model-low="filterObj.priceFilter.minPrice"\r\n                  ng-model-high="filterObj.priceFilter.maxPrice">\r\n          </slider> -->\r\n          <slider     ng-model="slider_price_range.arr"\r\n                      min="filterObj.priceFilter.floor"\r\n                      step="1"\r\n                      max="filterObj.priceFilter.ceil"\r\n                      range="true"\r\n                      value="slider_price_range.arr"></slider>\r\n        </div>\r\n\r\n        <div class="price-tag space-on-top-lg text-center">\r\n          <div class="pricePanel">\r\n            <input type="text"\r\n                   class="price-tag-input input-sm form-control"\r\n                   data-ng-pattern="/[0-9]/"\r\n                   data-ng-model="directiveInputMinPrice">\r\n          </div>\r\n\r\n          <div class="pricePanel">\r\n            <div class="space-on-left-lg space-on-right-lg display-inline-block">To</div>\r\n            <input type="text"\r\n                   class="price-tag-input input-sm form-control"\r\n                   data-ng-pattern="/[0-9]/"\r\n                   data-ng-model="directiveInputMaxPrice">\r\n          </div>\r\n\r\n            <!-- <div class="filterGoButton" data-ng-show="directiveFor!=\'mobile\'">\r\n              <a data-ng-click="clickFilter();"\r\n                 class="price-tag-go">\r\n                 <i class="goIcon semiRightArrow"></i>\r\n              </a>\r\n            </div> -->\r\n        </div>\r\n      </dl>\r\n    </div>\r\n  </div>\r\n</div>\r\n'),a.put("partials/templates/noResultsFound.html",'<div class="zero_results">\r\n    <h2 class="section-title">Sorry, no products were found.</h2>\r\n\r\n    <h4>Suggestions:</h4>\r\n    <ul>\r\n        <li>Try with a different nearby location. Type a Landmark that\'s nearest to your place.</li>\r\n        <li>\r\n            <a class="clickable" href="/contact" target="_blank">\r\n                Let us know your desired location/product\r\n            </a>\r\n            and we\'ll put our best to serve it.\r\n        </li>\r\n    </ul>\r\n    <div data-ng-hide="noSuppliersAtCurrentLocation">\r\n        <h3>Or, maybe we can help...</h3>\r\n        <h4>Popular Searches</h4>\r\n        <ol class="column">\r\n            <li><a class="clickable" href="#!/products/milk?source=frApp&category=milk&order=price%20ASC&page=1&price__min=30&price__max=90&variant=whole">Milk - Whole</a></li>\r\n            <li><a class="clickable" href="#!/products/milk?source=frApp&category=milk&order=price%20ASC&page=1&price__min=30&price__max=90&variant=toned">Milk - Toned</a></li>\r\n            <li><a class="clickable" href="#!/products/curd?source=frApp&category=curd&order=price%20ASC&page=1&price__min=30&price__max=100&variant=whole">Curd - Whole</a></li>\r\n        </ol>\r\n        <ol class="column">\r\n            <li><a class="clickable" href="#!/products/ghee?source=frApp&category=ghee&order=price%20ASC&price__min=250&price__max=750">Ghee - Full Clarified</a></li>\r\n            <li><a class="clickable" href="#!/products/milk?source=frApp&category=milk&order=price%20ASC&page=1&price__min=30&price__max=90&supplier_id=32">Milk - Milky Plus</a></li>\r\n            <li><a class="clickable" href="#!/products/milk?source=frApp&category=milk&order=price%20ASC&page=1&price__min=30&price__max=90&supplier_id=33">Milk - Dodla Dairy</a></li>\r\n        </ol>\r\n    </div>\r\n</div>'),a.put("partials/templates/orderDetailsForm.html",'<div id="orderForm_{{product.category.name}}_{{product.id}}" class="dim-text">\r\n        <hr class=\'subscription-form-separator\'>\r\n        <div class="text-center">\r\n            <!--<h4 class="text-center display-inline-block">Order details</h4>-->\r\n            <h4 class="text-center display-inline-block">Select order type</h4>\r\n            <button class="btn btn-default btn-close order-details-cross"\r\n                    title="Close" data-ng-click=\'closeFormStepOne();\' data-ng-hide="(radioTrueOrFalse==\'true\'||radioTrueOrFalse==\'false\')">\r\n                ×\r\n            </button>\r\n        </div>\r\n        <div id="orderDetails_{{product.category.name}}_{{product.id}}" class="text-center radio" style="margin-bottom: 10px">\r\n            <label class="mobile-delivery-type-label">\r\n                <input type="radio" data-ng-model="radioTrueOrFalse" value="true" data-ng-change="assignOrderType()">  Regular delivery\r\n                <br/><h6 class="text-muted space-on-top space-on-bottom-lg-lg">(Order {{product.category.name}} for 5, 7, 14, 30 days)</h6>\r\n            </label>\r\n            <div class="order-type-separator"></div>\r\n            <label class="mobile-delivery-type-label">\r\n                <input type="radio" data-ng-model="radioTrueOrFalse" value="false" data-ng-change="assignOrderType()"> One time delivery\r\n                <br/><h6 class="text-muted space-on-top space-on-bottom-lg-lg">(Order {{product.category.name}} only for one day)</h6>\r\n            </label>\r\n        </div>\r\n'+"        <div class='order-form-box subscription-form-wrapper' data-ng-show=\"(radioTrueOrFalse=='true'||radioTrueOrFalse=='false')\">\r\n            <form class='form-horizontal' name=\"orderDetailsForm\" role='form'>\r\n                <div class='form-group'>\r\n                    <label for='quantity' class='control-label col-sm-4'>Select quantity</label>\r\n                    <div class='col-sm-8'>\r\n                        <div class='input-group js-subscription-quantity'>\r\n                            <input type='number' step='0.5' id='quantity' class='form-control' data-ng-model='quantity' data-ng-show=\"showRegularDeliveryForm\" validate-quantity>\r\n                            <input type='number' step='0.5' id='quantity' class='form-control' data-ng-model='quantity' data-ng-hide=\"showRegularDeliveryForm\" validate-quantity>\r\n                            <span class='input-group-addon'>{{quantityUnit}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class='form-group' data-ng-show=\"showRegularDeliveryForm\">\r\n                    <label for='subscription-plans' class='control-label col-sm-4'>Regular delivery for</label>\r\n                    <div class='col-sm-8'>\r\n                        <select id='subscription-plans' class='js-subscription-plan form-control' data-ng-model='subscriptionPlan'>\r\n                            <option value='5'>5 days</option>\r\n                            <option value='7'>7 days</option>\r\n                            <option value='14'>14 days</option>\r\n                            <option value='21'>21 days</option>\r\n                            <option value='30'>30 days</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <div class='form-group'>\r\n                    <label for='subscription-datepicker' class='control-label col-sm-4' data-ng-show=\"showRegularDeliveryForm\">Select start date</label>\r\n                    <label for='subscription-datepicker' class='control-label col-sm-4' data-ng-hide=\"showRegularDeliveryForm\">Select delivery date</label>\r\n                    <div class='col-sm-8'>\r\n                        <div class='input-group date js-datepicker js-subscription-datepicker' data-date-format='dd-M-yyyy'>\r\n                            <input type='text' size='16' class='form-control clickable' data-ng-model='startDate' data-ng-show=\"showRegularDeliveryForm\" readonly data-ng-change=\"changeDeliveryDate(startDate);\">\r\n                            <input type='text' size='16' class='form-control clickable' data-ng-model='deliveryDate' data-ng-hide=\"showRegularDeliveryForm\" readonly data-ng-change=\"changeDeliveryDate(deliveryDate);\">\r\n                            <span class='input-group-addon clickable bg-white'>\r\n                                <i class='fa fa-calendar'></i>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class='form-group'>\r\n                    <label for='subscription-plans' class='control-label col-sm-4'>Delivery time slot</label>\r\n                    <div class=\"col-sm-8\">\r\n                        <div class=\"radio\">\r\n                            <label data-ng-class=\"{true:'dim-opacity', false:''}[disableMorningDelivery==true]\" data-ng-show=\"morningObj.available\">\r\n                                <input type=\"radio\" data-ng-model=\"timeSlot\" value=\"morning-slot\" name=\"time_of_order\" data-ng-disabled=\"disableMorningDelivery\">\r\n                                <span data-ng-class=\"{true:'text-muted', false:''}[disableMorningDelivery==true]\">Morning <h6 class=\"text-muted space-on-top space-on-bottom-lg display-inline-block space-on-left\">({{morningObj.formatted_range}})</h6></span>\r\n                            </label>\r\n                            <label data-ng-class=\"{true:'space-on-top', false:''}[morningObj.available]\">\r\n                                <input type=\"radio\" data-ng-model=\"timeSlot\" value=\"evening-slot\" name=\"time_of_order\" data-ng-show=\"eveningObj.available\">\r\n                                <span data-ng-show=\"eveningObj.available\">Evening <h6 class=\"text-muted space-on-top space-on-bottom-lg display-inline-block space-on-left\">({{eveningObj.formatted_range}})</h6></span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class='form-group'>\r\n                    <div class='col-sm-4 text-center clear-padding' data-ng-show=\"(disableMorningDelivery==true)&&(morningObj.available)\">\r\n                        <small class=\"alert-info space-on-bottom-lg padded-sm inline-block\">\r\n                            Morning slot available for tomorrow and later dates!\r\n                        </small>\r\n                    </div>\r\n                    <div class='col-sm-8' data-ng-class=\"{true:'', false:'col-sm-offset-4'}[(disableMorningDelivery==true)&&(morningObj.available)]\">\r\n                        <button type='submit' class='btn btn-orange col-sm-7 space-on-right-lg' data-ng-click='addToCart();' data-ng-disabled=\"(orderDetailsForm.$invalid)||(quantity<minQuantity)\">Add to cart</button>\r\n                        <button class='btn btn-default' data-ng-click='closeForm();'>Cancel</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n</div>\r\n"),a.put("partials/templates/productPanel.html",'<div class="panel panel-default result-panel" data-ng-class="{\'border-on-hover\': directiveFor!=\'productDetail\' , \'product-panel-at-detail\': directiveFor==\'productDetail\' , \'disabled-mask\': directiveFor==\'promotionProducts\' }">\r\n  <div class="panel-body">\r\n    <div class="fr-table">\r\n      <div class="product-thumbnail-wrapper" data-ng-if="directiveFor!=\'productDetail\'">\r\n        <a href="#!/product_detail/{{product.slug}}"\r\n           class="link-disguise"\r\n           data-ng-show="product.has_detail">\r\n            <img data-ng-src="{{ product.image_url }}" class="thumbnail-icon">\r\n        </a>\r\n        <img data-ng-src="{{ product.image_url }}" class="thumbnail-icon" data-ng-hide="product.has_detail">\r\n      </div>\r\n      <div class="product-info-wrapper">\r\n        <div class="clearfix">\r\n          <div class="pull-left">\r\n            <div>\r\n              <a href="#!/product_detail/{{product.slug}}"\r\n                 class="link-disguise product-name"\r\n                 data-ng-show="product.has_detail">\r\n                {{product.variantName}} {{product.categoryName}}\r\n              </a>\r\n              <span data-ng-hide="product.has_detail" class="product-name">\r\n                {{product.variantName}} {{product.categoryName}}\r\n              </span>\r\n              <small class="text-muted supplier-name" data-ng-if="!(directiveFor==\'OTDModal\')">{{product.supplier.name}}\r\n                <span data-ng-click="showDistributors()">\r\n                  <i id="dktp_dist_info_{{product.id}}" class="fa fa-info-circle space-on-left space-on-right"></i>\r\n                  </span>\r\n              </small>\r\n\r\n              <div class="dropdown space-on-top display-inline-block" data-ng-show="showDistributorsDD">\r\n                <a class="clickable btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" role="button">\r\n                  Delivery by: {{selectedDistributor.name}}\r\n                  <span class="caret"></span>\r\n                </a>\r\n\r\n                <ul class="dropdown-menu" role="menu">\r\n                  <li data-ng-repeat="distributor in product.distributors">\r\n                    <a href="" data-ng-click="selectDistributor($index);">\r\n                      {{distributor.name}} <span class="glyphicon glyphicon-ok" data-ng-show="selectedDistributor==distributor"></span>\r\n                      <span data-ng-show="$index==0">(Nearest)</span>\r\n                    </a>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <span class="visible-xs space-on-top" data-ng-if="(directiveFor==\'OTDModal\')">\r\n                <b class="space-on-right">Rs. {{product.discounted_price}}/{{quantityUnit}}</b>\r\n                <span><s>Rs. {{product.price}}</s></span>\r\n            </span>\r\n\r\n            <div class="space-on-top hidden-xs">\r\n              <b class="price align-middle">Rs. {{product.discounted_price}}/{{quantityUnit}}</b>\r\n              <span class="text-muted price space-on-left align-middle"><s>Rs. {{product.price}}</s></span>\r\n            </div>\r\n\r\n            <form class="form-inline space-on-top-lg hidden-xs">\r\n              <div class="form-group quantity-form-group">\r\n                <div class="input-group">\r\n                  <span class="input-group-btn">\r\n                    <button class="btn btn-xs btn-primary" type="button" data-ng-click="decreaseQuantity();">\r\n                      <i class="fa fa-minus"></i>\r\n                    </button>\r\n                  </span>\r\n\r\n                  <span>\r\n                    <span class="form-control input-quantity input-sm">\r\n                      {{quantity}} {{quantityUnit}}\r\n                    </span>\r\n                  </span>\r\n                  <span class="input-group-btn">\r\n                    <button class="btn btn-xs btn-primary" type="button" data-ng-click="increaseQuantity();">\r\n                      <i class="fa fa-plus"></i>\r\n                    </button>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div class="dropdown space-on-left-lg display-inline-block" data-ng-if="!(directiveFor==\'OTDModal\')">\r\n                <a class="clickable btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" role="button">\r\n                  <span data-ng-show="$parent.subscription_period>7">Monthly subscription</span>\r\n                  <span data-ng-show="$parent.subscription_period==7">Trial subscription</span>\r\n                  <span data-ng-show="$parent.subscription_period==0">One Time Delivery</span>\r\n                  <span class="caret"></span>\r\n                </a>\r\n\r\n                <ul class="dropdown-menu" role="menu">\r\n                  <!--<li><a href="" data-ng-click="$parent.subscription_period=5;">5 day subscription <span class="glyphicon glyphicon-ok" data-ng-show="$parent.subscription_period==5"></span></a></li>-->\r\n                  <li><a href="" data-ng-click="$parent.subscription_period=7;">Trial (7 days subscription)<span class="glyphicon glyphicon-ok" data-ng-show="$parent.subscription_period==7"></span></a></li>\r\n                  <!--<li><a href="" data-ng-click="$parent.subscription_period=14;">14 days subscription <span class="glyphicon glyphicon-ok" data-ng-show="$parent.subscription_period==14"></span></a></li>-->\r\n                  <!--<li><a href="" data-ng-click="$parent.subscription_period=21;">21 day subscription <span class="glyphicon glyphicon-ok" data-ng-show="$parent.subscription_period==21"></span></a></li>-->\r\n                  <li><a href="" data-ng-click="$parent.subscription_period=28;">Monthly subscription (28 days)<span class="glyphicon glyphicon-ok" data-ng-show="$parent.subscription_period==28"></span></a></li>\r\n                  <li><a href="" data-ng-click="$parent.subscription_period=30;">Monthly subscription (30 days)<span class="glyphicon glyphicon-ok" data-ng-show="$parent.subscription_period==30"></span></a></li>\r\n                  <li><a href="" data-ng-click="$parent.subscription_period=31;">Monthly subscription (31 days)<span class="glyphicon glyphicon-ok" data-ng-show="$parent.subscription_period==31"></span></a></li>\r\n                  <li class="divider"></li>\r\n                  <li><a href="" data-ng-click="$parent.subscription_period=0;">One Time Delivery <span class="glyphicon glyphicon-ok" data-ng-show="$parent.subscription_period==0"></span></a></li>\r\n                </ul>\r\n              </div>\r\n\r\n              <button class="btn btn-orange btn-sm space-on-left-lg" data-ng-click="addToCart();" type="submit" data-ng-if="!(directiveFor==\'promotionProducts\'||directiveFor==\'OTDModal\')">\r\n                <span data-ng-hide="$parent.subscription_period==0"><i class="fa fa-calendar space-on-right"></i> Subscribe</span>\r\n                <span data-ng-show="$parent.subscription_period==0"><i class="fa fa-cart-plus space-on-right"></i> Add to cart</span>\r\n              </button>\r\n              <button class="btn btn-orange btn-sm space-on-left-lg" data-ng-click="addToOTDModal();" type="submit" data-ng-if="(directiveFor==\'OTDModal\')">\r\n                <span class="space-on-left-lg space-on-right-lg">Add this</span>\r\n              </button>\r\n              <span data-ng-show="directiveFor==\'promotionProducts\'">\r\n                <p style="padding: 5px; font-size: 0.9em" class="alert-info display-inline-block space-on-left-lg hidden-xs hidden-sm">\r\n                  Coming soon at your location!\r\n                </p>\r\n\r\n\r\n              </span>\r\n            </form>\r\n          </div>\r\n\r\n          <div class="rating-panel-wrapper" data-ng-if="!(directiveFor==\'OTDModal\')">\r\n            <color-rating-panel-viewable directive-for="webApp" rating="$parent.product.reviews.rating" product-id="$parent.product.id" index-at-page="1"></color-rating-panel-viewable>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="visible-xs">\r\n      <hr class="hr-sm" data-ng-if="!(directiveFor==\'OTDModal\')">\r\n\r\n      <span data-ng-if="!(directiveFor==\'OTDModal\')">\r\n        <b class="price align-middle space-on-left">Rs. {{product.discounted_price}}/{{quantityUnit}}</b>\r\n        <span class="text-muted price space-on-left align-middle"><s>Rs. {{product.price}}</s></span>\r\n      </span>\r\n      <button class="btn btn-orange align-middle space-on-left-lg buy-btn-mbl visible-xs-inline-block" data-ng-click="$parent.clickBuy();" data-ng-if="!(showMobilePanel||directiveFor==\'promotionProducts\'||directiveFor==\'OTDModal\')">Buy</button>\r\n      <p style="padding: 5px;font-size: 0.9em;" class="alert-info text-center space-on-left space-on-bottom inline-block" data-ng-if="directiveFor==\'promotionProducts\'">\r\n        Coming soon!\r\n      </p>\r\n\r\n      <div class="form-group visible-xs-inline-block space-on-top space-on-bottom-none row" data-ng-if="(directiveFor==\'OTDModal\')">\r\n        <div class="col-xs-7">\r\n          <label for="quantity" class="control-label">Select quantity</label>\r\n          <div class="input-group">\r\n                <span class="input-group-btn">\r\n                  <button class="btn btn-primary" type="button" data-ng-click="decreaseQuantity();">\r\n                    <i class="fa fa-minus"></i>\r\n                  </button>\r\n                </span>\r\n\r\n                <span>\r\n                  <span class="form-control input-quantity">\r\n                    {{quantity}} {{quantityUnit}}\r\n                  </span>\r\n                </span>\r\n\r\n                <span class="input-group-btn">\r\n                  <button class="btn btn-primary" type="button" data-ng-click="increaseQuantity();">\r\n                    <i class="fa fa-plus"></i>\r\n                  </button>\r\n                </span>\r\n          </div>\r\n        </div>\r\n        <button class="btn btn-orange btn-md add-btn-otd-mbl" data-ng-click="$parent.addToOTDModal();" type="submit">\r\n          <span>Add this</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div id="mbl_pnl_{{product.category.name}}_{{product.id}}" class="subscription-form-wrapper" data-ng-if="showMobilePanel">\r\n        <form class="col-xs-11">\r\n          <div class="form-group">\r\n            <label for="quantity" class="control-label">Select quantity</label>\r\n            <div class="input-group">\r\n              <span class="input-group-btn">\r\n                <button class="btn btn-primary" type="button" data-ng-click="decreaseQuantity();">\r\n                  <i class="fa fa-minus"></i>\r\n                </button>\r\n              </span>\r\n\r\n              <span>\r\n                <span class="form-control input-quantity">\r\n                  {{quantity}} {{quantityUnit}}\r\n                </span>\r\n              </span>\r\n\r\n              <span class="input-group-btn">\r\n                <button class="btn btn-primary" type="button" data-ng-click="increaseQuantity();">\r\n                  <i class="fa fa-plus"></i>\r\n                </button>\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class="form-group">\r\n            <label for="subscription_period" class="control-label">Delivery period</label>\r\n            <select class="form-control" data-ng-model="$parent.subscription_period">\r\n              <optgroup label="Regular Delivery">\r\n                <!--<option value="5">5 day subscription</option>-->\r\n                <option value="7">Trial (7 days subscription)</option>\r\n                <!--<option value="14">14 days subscription</option>-->\r\n                <!--<option value="21">21 day subscription</option>-->\r\n                <option value="28">Monthly subscription (28 days)</option>\r\n                <option value="30">Monthly subscription (30 days)</option>\r\n                <option value="31">Monthly subscription (31 days)</option>\r\n              </optgroup>\r\n\r\n              <optgroup label="One Time Delivery">\r\n                <option value="0">1 day delivery</option>\r\n              </optgroup>\r\n            </select>\r\n          </div>\r\n\r\n          <div class="form-group">\r\n            <button class="btn btn-orange space-on-right-lg" type="submit" data-ng-click="$parent.addToCart();">\r\n              <span data-ng-hide="$parent.subscription_period==0"><i class="fa fa-calendar space-on-right"></i> Subscribe</span>\r\n              <span data-ng-show="$parent.subscription_period==0"><i class="fa fa-cart-plus space-on-right"></i> Add to cart</span>\r\n            </button>\r\n            <button class="btn btn-default" type="button" data-ng-click="$parent.clickCancel();">Cancel</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'),
a.put("partials/templates/promotionalProductPanel.html",'<div id="{{supplierProduct.category.name}}_{{supplierProduct.id}}" class="panel panel-default result-panel col-md-12 border-on-hover">\r\n    <div class="panel-body">\r\n        <div class="product-thumbnail clearfix">\r\n          <div class="pull-left">\r\n            <img data-ng-src="{{ supplierProduct.image_url }}"\r\n                class="thumbnail-icon">\r\n          </div>\r\n\r\n          <div class="label-wrapper visible-xs visible-sm">\r\n            <b>{{variantName}} {{categoryName}}</b>\r\n            <br>\r\n            <span class="muted">{{supplierProduct.supplier.name}}</span>\r\n          </div>\r\n\r\n          <div class="pull-right text-center visible-xs visible-sm">\r\n            <span style="display: block">Rating</span>\r\n            <color-rating-panel-viewable directive-for="mobile" rating="supplierProduct.reviews.rating" product-id="supplierProduct.id" index-at-page="1"></color-rating-panel-viewable>\r\n          </div>\r\n        </div>\r\n        <div class="result-detail">\r\n            <p class="clear-margin hidden-xs hidden-sm">\r\n              <b>{{variantName}} {{categoryName}}</b>\r\n              <br>\r\n              <span class="text-muted">{{supplierProduct.supplier.name}}</span>\r\n            </p>\r\n\r\n            <div>\r\n              <span class="align-middle font-lg dim-text">\r\n                  <span class="striked-price-text">\r\n                      <!--<i class="fa fa-inr"></i>-->\r\n                      Rs.\r\n                  {{supplierProduct.price}}</span>\r\n                <span class="discounted-price-text"><!--<i class="fa fa-inr"></i>-->Rs. {{supplierProduct.discounted_price}}/{{quantityUnit}}</span>\r\n              </span>\r\n\r\n              <!--<button class="btn btn-orange space-on-left-xl buy-button-focus" data-ng-click="clickBuy();" data-ng-disabled="true">\r\n                Currently unavailable at your location&nbsp;\r\n              </button>-->\r\n                <p style="padding: 5px; font-size: 0.9em" class="alert-info display-inline-block space-on-left-lg hidden-xs hidden-sm">\r\n                    Coming soon at your location!\r\n                </p>\r\n\r\n                <p style="padding: 5px;font-size: 0.9em;" class="alert-info text-center space-on-left-lg space-on-bottom visible-xs-inline-block visible-sm-inline-block">\r\n                    Coming soon!\r\n                </p>\r\n\r\n              <div class="pull-right hidden-xs hidden-sm space-on-right-xl">\r\n                <span>Rating</span>\r\n                <color-rating-panel-viewable directive-for="webApp" rating="supplierProduct.reviews.rating" product-id="supplierProduct.id" index-at-page="1"></color-rating-panel-viewable>\r\n              </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n'),a.put("partials/templates/ratingPanel.html","<span class=\"rating golden\">\r\n    <i class=\"fa\" data-ng-class=\"{'fa-star-o': rating<=0, 'fa-star-half-empty': (0<rating)&&(rating<1), 'fa-star': rating>=1}\"></i>\r\n    <i class=\"fa\" data-ng-class=\"{'fa-star-o': rating<=1, 'fa-star-half-empty': (1<rating)&&(rating<2), 'fa-star': rating>=2}\"></i>\r\n    <i class=\"fa\" data-ng-class=\"{'fa-star-o': rating<=2, 'fa-star-half-empty': (2<rating)&&(rating<3), 'fa-star': rating>=3}\"></i>\r\n    <i class=\"fa\" data-ng-class=\"{'fa-star-o': rating<=3, 'fa-star-half-empty': (3<rating)&&(rating<4), 'fa-star': rating>=4}\"></i>\r\n    <i class=\"fa\" data-ng-class=\"{'fa-star-o': rating<=4, 'fa-star-half-empty': (4<rating)&&(rating<5), 'fa-star': rating>=5}\"></i>\r\n</span>"),a.put("partials/templates/sortingBox.html",'<form class="form-inline" role="form">\r\n    <div class="form-group">\r\n        <label for="result-sort">Sort by:</label>\r\n        <select id="result-sort"\r\n        		class="border-on-hover form-control input-sm sort-options"\r\n        		data-ng-model="sortParam"\r\n        		data-ng-change="getSortedData();"\r\n        		data-ng-options="option.value as option.name for option in sortListItems" >\r\n        </select>\r\n    </div>\r\n</form>\r\n')}]);